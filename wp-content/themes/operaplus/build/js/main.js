!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dl=e()}}(function(){return function e(t,n,r){function a(o,f){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!f&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return a(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){var r=e("./util"),a={load:e("./import/load"),read:e("./import/read"),type:e("./import/type"),bins:e("./bins/bins"),$bin:e("./bins/histogram").$bin,groupby:e("./aggregate/groupby"),histogram:e("./bins/histogram").histogram,print:e("./print"),template:e("./template"),timeunits:e("./time-units")};r.extend(a,r),r.extend(a,e("./generate")),r.extend(a,e("./stats")),r.extend(a,e("./import/readers")),t.exports=a},{"./aggregate/groupby":6,"./bins/bins":8,"./bins/histogram":9,"./generate":10,"./import/load":16,"./import/read":17,"./import/readers":18,"./import/type":19,"./print":20,"./stats":21,"./template":22,"./time-units":23,"./util":24}],2:[function(e,t,n){},{}],3:[function(e,t,n){function r(){if(!f){f=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}f=!1}}function a(){}var i=t.exports={},o=[],f=!1;i.nextTick=function(e){o.push(e),f||setTimeout(r,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=a,i.addListener=a,i.once=a,i.off=a,i.removeListener=a,i.removeAllListeners=a,i.emit=a,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],4:[function(e,t,n){function r(){this._cells={},this._aggr=[],this._stream=!1}function a(e){if(i.isArray(e))return e;if(null==e)return[];var t,n,r=[];for(t in e)n=i.array(e[t]),r.push({name:t,ops:n});return r}var i=e("../util"),o=e("./measures"),f=e("./collector"),s=r.Flags={ADD_CELL:1,MOD_CELL:2},u=r.prototype;u.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},u.key=function(e){return null==e?this._key:(this._key=i.$(e),this)},u.groupby=function(e){return this._dims=i.array(e).map(function(e,t){if(e=i.isString(e)?{name:e,get:i.$(e)}:i.isFunction(e)?{name:i.name(e)||e.name||"_"+t,get:e}:e.name&&i.isFunction(e.get)?e:null,null==e)throw"Invalid groupby argument: "+e;return e}),this.clear()},u.summarize=function(e){e=a(e),this._count=!0;var t,n,r,f,s,u,c,l=this._aggr=[];for(r=0;r<e.length;++r){for(f=0,t=[],n=e[r];f<n.ops.length;++f)s=n.ops[f],"count"!==s&&(this._count=!1),u=n.as&&n.as[f]||s+("*"===n.name?"":"_"+n.name),t.push(o[s](u));c=n.get&&i.$(n.get)||("*"===n.name?i.identity:i.$(n.name)),l.push({name:n.name,measures:o.create(t,this._stream,c,this._assign)})}return this.clear()},u.count=function(){return this.summarize({"*":"count"})},u._assign=function(e,t,n){e[t]=n},u.clear=function(){return this._cells={},this},u._cellkey=function(e){var t,n=this._dims,r=n.length,a=String(n[0].get(e));for(t=1;r>t;++t)a+="|"+n[t].get(e);return a},u._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e))},u._newcell=function(e){var t,n={num:0,tuple:this._newtuple(e),flag:s.ADD_CELL,aggs:{}},r=this._aggr;for(t=0;t<r.length;++t)n.aggs[r[t].name]=new r[t].measures(n,n.tuple);return n.collect&&(n.data=new f(this._key)),n},u._newtuple=function(e){var t,n,r=this._dims,a={};for(t=0,n=r.length;n>t;++t)a[r[t].name]=r[t].get(e);return this._ingest(a)},u._ingest=i.identity,u._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=s.MOD_CELL},u._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=s.MOD_CELL},u._mod=function(e,t){var n,r=this._cell(t),a=this._cell(e),o=this._aggr;for(r!==a?(r.num-=1,a.num+=1,r.collect&&r.data.rem(t),a.collect&&a.data.add(e)):r.collect&&!i.isObject(e)&&(r.data.rem(t),r.data.add(e)),n=0;n<o.length;++n)r.aggs[o[n].name].rem(t),a.aggs[o[n].name].add(e);r.flag|=s.MOD_CELL,a.flag|=s.MOD_CELL},u.result=function(){var e,t,n,r=[],a=this._aggr;for(n in this._cells){if(e=this._cells[n],e.num>0){for(e.collect&&e.data.values(),t=0;t<a.length;++t)e.aggs[a[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},u.changes=function(){var e,t,n,r,a={add:[],rem:[],mod:[]},i=this._aggr;for(r in this._cells){for(e=this._cells[r],t=e.flag,e.collect&&e.data.values(),n=0;n<i.length;++n)e.aggs[i[n].name].set();e.num<=0?(a.rem.push(e.tuple),delete this._cells[r]):t&s.ADD_CELL?a.add.push(e.tuple):t&s.MOD_CELL&&a.mod.push(e.tuple),e.flag=0}return this._rems=!1,a},u.execute=function(e){return this.clear().insert(e).result()},u.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},u.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},u._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},t.exports=r},{"../util":24,"./collector":5,"./measures":7}],5:[function(e,t,n){function r(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var a=e("../util"),i=e("../stats"),o="__dl_rem__",f=r.prototype;f.add=function(e){this._add.push(e)},f.rem=function(e){this._rem.push(e)},f.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r,f=this._add,s=this._rem,u=this._key,c=Array(f.length-s.length);if(a.isObject(s[0]))if(u)for(r=a.toMap(s,u),e=0,t=0,n=f.length;n>e;++e)r.hasOwnProperty(u(f[e]))||(c[t++]=f[e]);else{for(e=0,n=s.length;n>e;++e)s[e][o]=1;for(e=0,t=0,n=f.length;n>e;++e)f[e][o]||(c[t++]=f[e]);for(e=0,n=s.length;n>e;++e)delete s[e][o]}else for(r=i.count.map(s),e=0,t=0,n=f.length;n>e;++e)r[f[e]]>0?r[f[e]]-=1:c[t++]=f[e];return this._rem=[],this._add=c},f.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=i.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},f.argmin=function(e){return this.extent(e)[0]},f.argmax=function(e){return this.extent(e)[1]},f.min=function(e){var t=this.extent(e)[0];return t?e(t):+(1/0)},f.max=function(e){var t=this.extent(e)[1];return t?e(t):-(1/0)},f.quartile=function(e){return this._get===e&&this._q||(this._q=i.quartile(this.values(),e),this._get=e),this._q},f.q1=function(e){return this.quartile(e)[0]},f.q2=function(e){return this.quartile(e)[1]},f.q3=function(e){return this.quartile(e)[2]},t.exports=r},{"../stats":21,"../util":24}],6:[function(e,t,n){var r=e("../util"),a=e("./aggregator");t.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new a).groupby(e).summarize({"*":"values"})}},{"../util":24,"./aggregator":4}],7:[function(e,t,n){function r(e){return function(t){var n=o.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function a(e,t){function n(e,r){function a(t){e[t]||n(e,e[t]=f[t]())}return r.req&&r.req.forEach(a),t&&r.str&&r.str.forEach(a),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return o.vals(r).sort(function(e,t){return e.idx-t.idx})}function i(t,n,r,i){var f=a(t,n),s="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",u="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",c="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",l="var t = this.tuple; var cell = this.cell;";return f.forEach(function(e){e.idx<0?(s=e.init+s,u=e.add+u,c=e.rem+c):(s+=e.init,u+=e.add,c+=e.rem)}),t.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){l+="this.assign(t,'"+e.out+"',"+e.set+");"}),l+="return t;",s=Function("cell","t",s),s.prototype.assign=i,s.prototype.add=Function("t","var v = this.get(t);"+u),s.prototype.rem=Function("t","var v = this.get(t);"+c),s.prototype.set=Function(l),s.prototype.get=r,s.prototype.distinct=e("../stats").count.distinct,s.prototype.isValid=o.isValid,s}var o=e("../util"),f={values:r({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:r({name:"count",set:"cell.num"}),missing:r({name:"missing",set:"this.missing"}),valid:r({name:"valid",set:"this.valid"}),sum:r({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:r({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:r({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:r({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:r({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:r({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:r({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),median:r({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:r({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:r({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:r({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:r({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:r({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:r({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:r({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:r({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","stdev","median"],idx:5})};f.create=i,t.exports=f},{"../stats":21,"../util":24}],8:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,f,s,u,c,l=e.maxbins||15,d=e.base||10,p=Math.log(d),h=e.div||[5,2],m=e.min,g=e.max,b=g-m;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,a(e.steps,b/l,0,e.steps.length))];else{n=Math.ceil(Math.log(l)/p),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(b)/p)-n));do t*=d;while(Math.ceil(b/t)>l);for(u=0;u<h.length;++u)s=t/h[u],s>=r&&l>=b/s&&(t=s)}return s=Math.log(t),f=s>=0?0:~~(-s/p)+1,c=Math.pow(d,-f-1),m=Math.min(m,Math.floor(m/t+c)*t),g=Math.ceil(g/t)*t,{start:m,stop:g,step:t,unit:{precision:f},value:i,index:o}}function a(e,t,n,r){for(;r>n;){var a=n+r>>>1;u.cmp(e[a],t)<0?n=a+1:r=a}return n}function i(e){return this.step*Math.floor(e/this.step+l)}function o(e){return Math.floor((e-this.start)/this.step+l)}function f(e){return this.unit.date(i.call(this,e))}function s(e){return o.call(this,this.unit.unit(e))}var u=e("../util"),c=e("../time-units"),l=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.min,n=e.max,a=e.maxbins||20,i=e.minbins||4,o=+n-+t,u=e.unit?c[e.unit]:c.find(o,i,a),l=r({min:null!=u.min?u.min:u.unit(t),max:null!=u.max?u.max:u.unit(n),maxbins:a,minstep:u.minstep,steps:u.step});return l.unit=u,l.index=s,e.raw||(l.value=f),l},t.exports=r},{"../time-units":23,"../util":24}],9:[function(e,t,n){function r(e,t,n){n=o(e,t,n);var r=i(n);return r?l.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||l.identity}function a(e,t,n){n=o(e,t,n);var r=i(n);return r?f(e,n.accessor,r):s(e,n.accessor,n&&n.sort)}function i(e){var t=e.type,n=null;return(null==t||h[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?p.date(e):p(e)),n}function o(){var e=arguments,t=0,n=l.isArray(e[t])?e[t++]:null,r=l.isFunction(e[t])||l.isString(e[t])?l.$(e[t++]):null,a=l.extend({},e[t]);if(n&&(a.type=a.type||c(n,r),h[a.type])){var i=u.extent(n,r);a=l.extend({min:i[0],max:i[1]},a)}return r&&(a.accessor=r),a}function f(e,t,n){for(var r,a,i=d.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),o=0;o<e.length;++o)if(r=t?t(e[o]):e[o],l.isValid(r)){if(a=n.index(r),0>a||a>=i.length||!isFinite(a))continue;i[a].count+=1}return i.bins=n,i}function s(e,t,n){var r=u.unique(e,t),a=u.count.map(e,t);return r.map(function(e){return{value:e,count:a[e]}}).sort(l.comparator(n?"-count":"+value"))}var u=e("../stats"),c=e("../import/type"),l=e("../util"),d=e("../generate"),p=e("./bins"),h={integer:1,number:1,date:1};t.exports={$bin:r,histogram:a}},{"../generate":10,"../import/type":19,"../stats":21,"../util":24,"./bins":8}],10:[function(e,t,n){var r=t.exports={};r.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},r.zeros=function(e){return r.repeat(0,e)},r.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,a=[],i=-1;if(0>n)for(;(r=e+n*++i)>t;)a.push(r);else for(;(r=e+n*++i)<t;)a.push(r);return a},r.random={},r.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,a=function(){return e+n*Math.random()};return a.samples=function(e){return r.zeros(e).map(a)},a},r.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,a=function(){return e+Math.floor(n*Math.random())};return a.samples=function(e){return r.zeros(e).map(a)},a},r.random.normal=function(e,t){e=e||0,t=t||1;var n,a=function(){var r,a,i=0,o=0;if(void 0!==n)return i=n,n=void 0,i;do i=2*Math.random()-1,o=2*Math.random()-1,r=i*i+o*o;while(0===r||r>1);return a=Math.sqrt(-2*Math.log(r)/r),n=e+o*a*t,e+i*a*t};return a.samples=function(e){return r.zeros(e).map(a)},a}},{}],11:[function(e,t,n){(function(n){function r(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return i.dsv(t.delimiter).parse(e)}var a=e("../../util"),i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null;r.delimiter=function(e){var t={delimiter:e};return function(e,n){return r(e,n?a.extend(n,t):t)}},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../util":24}],12:[function(e,t,n){var r=e("./dsv");t.exports={json:e("./json"),topojson:e("./topojson"),treejson:e("./treejson"),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("	")}},{"./dsv":11,"./json":13,"./topojson":14,"./treejson":15}],13:[function(e,t,n){var r=e("../../util");t.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=r.accessor(t.property)(n)),n}},{"../../util":24}],14:[function(e,t,n){(function(n){var r=e("./json"),a=function(e,t){var n=a.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var i,o=r(e,t);if(t&&t.feature){if(i=o.objects[t.feature])return n.feature(o,i).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(i=o.objects[t.mesh])return[n.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};a.topojson="undefined"!=typeof window?window.topojson:"undefined"!=typeof n?n.topojson:null,t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./json":13}],15:[function(e,t,n){function r(e,t){function n(e){r.push(e);var a=e[t];if(a)for(var i=0;i<a.length;++i)n(a[i],e)}t=t||"children";var r=[];return n(e,null),r.root=e,r}var a=e("./json");t.exports=function(e,t){return e=a(e,t),r(e,t&&t.children)}},{"./json":13}],16:[function(e,t,n){function r(t){var n=t.url;if(!n&&t.file)return l+t.file;if(t.baseURL&&!c.test(n)&&(u.startsWith(n,"/")||"/"===t.baseURL[t.baseURL.length-1]||(n="/"+n),n=t.baseURL+n),u.isNode&&u.startsWith(n,"//")&&(n=(t.defaultProtocol||"http")+":"+n),t.domainWhiteList){var r,a;if(u.isNode){var i=e("url").parse(n);r=i.hostname,a=null}else{var o=document.createElement("a");o.href=n,""===o.host&&(o.href=o.href),r=o.hostname.toLowerCase(),a=window.location.hostname}if(a!==r){var f=t.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t});if(!f)throw"URL is not whitelisted: "+n}}return n}function a(e,t){var n,r=t||function(e){throw e};try{n=a.sanitizeUrl(e)}catch(i){return void r(i)}return n?u.isNode?u.startsWith(n,l)?f(n.slice(l.length),t):n.indexOf("://")<0?f(n,t):s(n,t):o(n,t):void r("Invalid URL: "+n)}function i(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function o(e,t){function n(){var e=a.status;!e&&i(a)||e>=200&&300>e||304===e?t(null,a.responseText):t(a,null)}var r=!!t,a=new XMLHttpRequest;return!this.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),r&&("onload"in a?a.onload=a.onerror=n:a.onreadystatechange=function(){a.readyState>3&&n()}),a.open("GET",e,r),a.send(),!r&&i(a)?a.responseText:void 0}function f(t,n){var r=e("fs");return n?void e("fs").readFile(t,n):r.readFileSync(t,"utf8")}function s(t,n){return n?void e("request")(t,function(e,t,r){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",n(e,null)):n(null,r)}):e("sync-request")("GET",t).getBody()}var u=e("../util"),c=/^([A-Za-z]+:)?\/\//,l="file://";a.sanitizeUrl=r,t.exports=a},{"../util":24,fs:2,request:2,"sync-request":2,url:2}],17:[function(e,t,n){function r(e,t){var n=t&&t.type||"json";return e=f[n](e,t),t&&t.parse&&a(e,t.parse),e}function a(e,t){var n,r,a,f,s,u,c=e.length;for(t="auto"===t?o.inferAll(e):i.duplicate(t),n=i.keys(t),r=n.map(function(e){return o.parsers[t[e]]}),f=0,u=n.length;c>f;++f)for(a=e[f],s=0;u>s;++s)a[n[s]]=r[s](a[n[s]]);o.annotation(e,t)}var i=e("../util"),o=e("./type"),f=e("./formats");r.formats=f,t.exports=r},{"../util":24,"./formats":12,"./type":19}],18:[function(e,t,n){var r=e("../util"),a=e("./load"),i=e("./read");t.exports=r.keys(i.formats).reduce(function(e,t){return e[t]=function(e,n,o){r.isString(e)&&(e={url:e}),2===arguments.length&&r.isFunction(n)&&(o=n,n=void 0),n=r.extend({parse:"auto"},n),n.type=t;var f=a(e,o?function(e,t){if(e)return void o(e,null);try{t=i(t,n)}catch(r){o(r,null)}o(null,t)}:void 0);return f?i(f,n):void 0},e},{})},{"../util":24,"./load":16,"./read":17}],19:[function(e,t,n){function r(e,t){return t?void(e[u]=t):e&&e[u]||null}function a(e,t){t=s.$(t);var n,r,a;if(e[u]&&(n=t(e[u]),s.isString(n)))return n;for(r=0,a=e.length;!s.isValid(n)&&a>r;++r)n=t?t(e[r]):e[r];return s.isDate(n)?"date":s.isNumber(n)?"number":s.isBoolean(n)?"boolean":s.isString(n)?"string":null}function i(e,t){return e.length?(t=t||s.keys(e[0]),t.reduce(function(t,n){return t[n]=a(e,n),t},{})):void 0}function o(e,t){t=s.$(t);var n,r,a,i=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(a=t?t(e[n]):e[n],r=0;r<i.length;++r)s.isValid(a)&&!l[i[r]](a)&&(i.splice(r,1),r-=1);if(0===i.length)return"string"}return i[0]}function f(e,t){return t=t||s.keys(e[0]),t.reduce(function(t,n){return t[n]=o(e,n),t},{})}var s=e("../util"),u="__types__",c={"boolean":s["boolean"],integer:s.number,number:s.number,date:s.date,string:function(e){return""===e?null:e}},l={"boolean":function(e){return"true"===e||"false"===e||s.isBoolean(e)},integer:function(e){return l.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!s.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};a.annotation=r,a.all=i,a.infer=o,a.inferAll=f,a.parsers=c,t.exports=a},{"../util":24}],20:[function(e,t,n){function r(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function a(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=i.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(r).join("\n")}var i=e("./util"),o=e("./import/type"),f=e("./stats"),s=e("./template"),u={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},c={number:"left",integer:"left"};t.exports.table=function(e,t){t=i.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||i.keys(e[0]),r=o.all(e);if(t.start||t.limit){var a=t.start||0,l=t.limit?a+t.limit:e.length;e=e.slice(a,l)}var d=n.map(function(n){var a=u[r[n]]||"",i=s("{{"+n+a+"}}"),o=f.max(e,function(e){return i(e).length});return o=Math.max(Math.min(n.length,t.minwidth),o),t.maxwidth>0?Math.min(o,t.maxwidth):o}),p=n.map(function(e,t){return i.truncate(i.pad(e,d[t],"center"),d[t])}).join(t.separator),h=s(n.map(function(e,t){return"{{"+e+(u[r[e]]||"")+("|pad:"+d[t]+","+(c[r[e]]||"right"))+("|truncate:"+d[t])+"}}"}).join(t.separator));return p+"\n"+e.map(h).join("\n")},t.exports.summary=function(e){e=e?e.__summary__?e:f.summary(e):this;var t,n,i=[];for(t=0,n=e.length;n>t;++t)i.push("-- "+e[t].field+" --"),i.push("string"===e[t].type||e[t].distinct<10?a(e[t]):r(e[t])),i.push("");return i.join("\n")}},{"./import/type":19,"./stats":21,"./template":22,"./util":24}],21:[function(e,t,n){var r=e("./util"),a=e("./import/type"),i=e("./generate"),o={};o.unique=function(e,t,n){t=r.$(t),n=n||[];var a,i,o,f={};for(i=0,o=e.length;o>i;++i)a=t?t(e[i]):e[i],a in f||(f[a]=1,n.push(a));return n},o.count=function(e){return e&&e.length||0},o.count.valid=function(e,t){t=r.$(t);var n,a,i,o=0;for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],r.isValid(n)&&(o+=1);return o},o.count.missing=function(e,t){t=r.$(t);var n,a,i,o=0;for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],null==n&&(o+=1);return o},o.count.distinct=function(e,t){t=r.$(t);var n,a,i,o={},f=0;for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],n in o||(o[n]=1,f+=1);return f},o.count.map=function(e,t){t=r.$(t);var n,a,i,o={};for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],o[n]=n in o?o[n]+1:1;return o},o.median=function(e,t){return t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp),o.quantile(e,.5)},o.quartile=function(e,t){t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp);var n=o.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},o.quantile=function(e,t,n){void 0===n&&(n=t,t=r.identity),t=r.$(t);var a=(e.length-1)*n+1,i=Math.floor(a),o=+t(e[i-1]),f=a-i;return f?o+f*(t(e[i])-o):o},o.sum=function(e,t){t=r.$(t);for(var n,a=0,i=0,o=e.length;o>i;++i)n=t?t(e[i]):e[i],r.isValid(n)&&(a+=n);return a},o.mean=function(e,t){t=r.$(t);var n,a,i,o,f,s=0;for(a=0,o=0,i=e.length;i>a;++a)f=t?t(e[a]):e[a],r.isValid(f)&&(n=f-s,s+=n/++o);return s},o.variance=function(e,t){if(t=r.$(t),!r.isArray(e)||e.length<2)return 0;var n,a,i,o,f=0,s=0;for(a=0,i=0;a<e.length;++a)o=t?t(e[a]):e[a],r.isValid(o)&&(n=o-f,f+=n/++i,s+=n*(o-f));return s/=i-1},o.stdev=function(e,t){return Math.sqrt(o.variance(e,t))},o.modeskew=function(e,t){var n=o.mean(e,t),r=o.median(e,t),a=o.stdev(e,t);return 0===a?0:(n-r)/a},o.min=function(e,t){return o.extent(e,t)[0]},o.max=function(e,t){return o.extent(e,t)[1]},o.extent=function(e,t){t=r.$(t);var n,a,i,o,f=e.length;for(o=0;f>o;++o)if(i=t?t(e[o]):e[o],r.isValid(i)){n=a=i;break}for(;f>o;++o)i=t?t(e[o]):e[o],r.isValid(i)&&(n>i&&(n=i),i>a&&(a=i));return[n,a]},o.extent.index=function(e,t){t=r.$(t);var n,a,i,o,f=-1,s=-1,u=e.length;for(o=0;u>o;++o)if(i=t?t(e[o]):e[o],r.isValid(i)){n=a=i,f=s=o;break}for(;u>o;++o)i=t?t(e[o]):e[o],r.isValid(i)&&(n>i&&(n=i,f=o),i>a&&(a=i,s=o));return[f,s]},o.dot=function(e,t,n){var a,i,o=0;if(n)for(t=r.$(t),n=r.$(n),a=0;a<e.length;++a)i=t(e[a])*n(e[a]),i===i&&(o+=i);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(a=0;a<e.length;++a)i=e[a]*t[a],i===i&&(o+=i)}return o},o.rank=function(e,t){t=r.$(t)||r.identity;var n,a,i,o=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(r.comparator("val")),f=e.length,s=Array(f),u=-1,c={};for(n=0;f>n;++n){if(a=o[n].val,0>u&&c===a)u=n-1;else if(u>-1&&c!==a){for(i=1+(n-1+u)/2;n>u;++u)s[o[u].idx]=i;u=-1}s[o[n].idx]=n+1,c=a}if(u>-1)for(i=1+(f-1+u)/2;f>u;++u)s[o[u].idx]=i;return s},o.cor=function(e,t,n){var a=n;n=a?e.map(r.$(n)):t,t=a?e.map(r.$(t)):e;var i=o.dot(t,n),f=o.mean(t),s=o.mean(n),u=o.stdev(t),c=o.stdev(n),l=e.length;return(i-l*f*s)/((l-1)*u*c)},o.cor.rank=function(e,t,n){var a,i,f,s=n?o.rank(e,r.$(t)):o.rank(e),u=n?o.rank(e,r.$(n)):o.rank(t),c=e.length;for(a=0,i=0;c>a;++a)f=s[a]-u[a],i+=f*f;return 1-6*i/(c*(c*c-1))},o.cor.dist=function(e,t,n){var a,i,f,s,u=n?e.map(r.$(t)):e,c=n?e.map(r.$(n)):t,l=o.dist.mat(u),d=o.dist.mat(c),p=l.length;for(a=0,i=0,f=0,s=0;p>a;++a)i+=l[a]*l[a],f+=d[a]*d[a],s+=l[a]*d[a];return Math.sqrt(s/Math.sqrt(i*f))},o.dist=function(e,t,n,a){var i,o,f=r.isFunction(n)||r.isString(n),s=e,u=f?e:t,c=f?a:n,l=2===c||null==c,d=e.length,p=0;for(f&&(t=r.$(t),n=r.$(n)),o=0;d>o;++o)i=f?t(s[o])-n(u[o]):s[o]-u[o],p+=l?i*i:Math.pow(Math.abs(i),c);return l?Math.sqrt(p):Math.pow(p,1/c)},o.dist.mat=function(e){var t,n,r,a=e.length,o=a*a,f=Array(o),s=i.zeros(a),u=0;for(n=0;a>n;++n)for(f[n*a+n]=0,r=n+1;a>r;++r)f[n*a+r]=t=Math.abs(e[n]-e[r]),f[r*a+n]=t,s[n]+=t,s[r]+=t;for(n=0;a>n;++n)u+=s[n],s[n]/=a;for(u/=o,n=0;a>n;++n)for(r=n;a>r;++r)f[n*a+r]+=u-s[n]-s[r],f[r*a+n]=f[n*a+r];return f},o.entropy=function(e,t){t=r.$(t);var n,a,i=0,o=0,f=e.length;for(n=0;f>n;++n)i+=t?t(e[n]):e[n];if(0===i)return 0;for(n=0;f>n;++n)a=(t?t(e[n]):e[n])/i,a&&(o+=a*Math.log(a));return-o/Math.LN2},o.mutual=function(e,t,n,a){var i,o,f,s=a?e.map(r.$(t)):e,u=a?e.map(r.$(n)):t,c=a?e.map(r.$(a)):n,l={},d={},p=c.length,h=0,m=0,g=0;for(f=0;p>f;++f)l[s[f]]=0,d[u[f]]=0;for(f=0;p>f;++f)l[s[f]]+=c[f],d[u[f]]+=c[f],h+=c[f];for(o=1/(h*Math.LN2),f=0;p>f;++f)0!==c[f]&&(i=h*c[f]/(l[s[f]]*d[u[f]]),m+=c[f]*o*Math.log(i),g+=c[f]*o*Math.log(c[f]/h));return[m,1+m/g]},o.mutual.info=function(e,t,n,r){return o.mutual(e,t,n,r)[0]},o.mutual.dist=function(e,t,n,r){return o.mutual(e,t,n,r)[1]},o.profile=function(e,t){var n,i,f,s,u,c=0,l=0,d=0,p=0,h=null,m=null,g=0,b=[],y={};for(f=0;f<e.length;++f)s=t?t(e[f]):e[f],y[s]=s in y?y[s]+1:(p+=1,1),null==s?++d:r.isValid(s)&&(u="string"==typeof s?s.length:s,(null===h||h>u)&&(h=u),(null===m||u>m)&&(m=u),n=u-c,c+=n/++l,g+=n*(u-c),b.push(u));return g/=l-1,i=Math.sqrt(g),b.sort(r.cmp),{type:a(e,t),unique:y,count:e.length,valid:l,missing:d,distinct:p,min:h,max:m,mean:c,stdev:i,median:s=o.quantile(b,.5),q1:o.quantile(b,.25),q3:o.quantile(b,.75),modeskew:0===i?0:(c-s)/i}},o.summary=function(e,t){t=t||r.keys(e[0]);var n=t.map(function(t){var n=o.profile(e,r.$(t));return n.field=t,n});return n.__summary__=!0,n},t.exports=o},{"./generate":10,"./import/type":19,"./util":24}],22:[function(e,t,n){(function(n){function r(e){var t=a(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(c)}function a(e,t,n){t=t||"obj";var r=0,a="'",f=l;return e.replace(f,function(f,s,u){return a+=e.slice(r,u).replace(p,o),r=u+f.length,s&&(a+="'\n+((__t=("+i(s,t,n)+"))==null?'':__t)+\n'"),f}),a+"'"}function i(e,t,n){function a(e){return e=e||"",l?(l=!1,d="String("+d+")"+e):d+=e,d}function i(){return"(typeof "+d+'==="number"?new Date('+d+"):"+d+")"}var o=e.split("|"),c=o.shift().trim(),l=!0;n&&(n[c]=1);for(var d=r.property(t,c),p=0;p<o.length;++p){var h,m,g,b=o[p],y=null;switch((h=b.indexOf(":"))>0&&(b=b.slice(0,h),y=o[p].slice(h+1).split(",").map(function(e){return e.trim()})),b=b.trim()){case"length":a(".length");break;case"lower":a(".toLowerCase()");break;case"upper":a(".toUpperCase()");break;case"lower-locale":a(".toLocaleLowerCase()");break;case"upper-locale":a(".toLocaleUpperCase()");break;case"trim":a(".trim()");break;case"left":m=s.number(y[0]),a(".slice(0,"+m+")");break;case"right":m=s.number(y[0]),a(".slice(-"+m+")");break;case"mid":m=s.number(y[0]),g=m+s.number(y[1]),a(".slice(+"+m+","+g+")");break;case"slice":m=s.number(y[0]),a(".slice("+m+(y.length>1?","+s.number(y[1]):"")+")");break;case"truncate":m=s.number(y[0]),g=y[1],g="left"!==g&&"middle"!==g&&"center"!==g?"right":g,d="this.truncate("+a()+","+m+",'"+g+"')";break;case"pad":m=s.number(y[0]),g=y[1],g="left"!==g&&"middle"!==g&&"center"!==g?"right":g,d="this.pad("+a()+","+m+",'"+g+"')";break;case"number":m=f(y[0],u.format),l=!1,d="this.formats["+m+"]("+d+")";break;case"time":m=f(y[0],u.time.format),l=!1,d="this.formats["+m+"]("+i()+")";break;default:throw Error("Unrecognized template filter: "+b)}}return d}function o(e){return"\\"+d[e]}function f(e,t){if(!("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]))throw Error("Format pattern must be quoted: "+e);if(e=e.slice(1,-1),!c.format_map[e]){var n=t(e),r=c.formats.length;c.formats.push(n),c.format_map[e]=r}return c.format_map[e]}var s=e("./util"),u="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,c={formats:[],format_map:{},truncate:s.truncate,pad:s.pad};r.source=a,r.context=c,t.exports=r,r.clearFormatCache=function(){c.formats=[],c.format_map={}},r.property=function(e,t){var n=s.field(t).map(s.str).join("][");return e+"["+n+"]"};var l=/\{\{(.+?)\}\}|$/g,d={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},p=/\\|'|\r|\n|\u2028|\u2029/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":24}],23:[function(e,t,n){function r(e){return"number"==typeof e}var a=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]],i=[{type:"second",minstep:1,format:"%Y %b %-d %H:%M:%S.%L",date:function(e){return new Date(1e3*e)},unit:function(e){return+e/1e3}},{type:"minute",minstep:1,format:"%Y %b %-d %H:%M",date:function(e){return new Date(6e4*e)},unit:function(e){return~~(+e/6e4)}},{type:"hour",minstep:1,format:"%Y %b %-d %H:00",date:function(e){return new Date(36e5*e)},unit:function(e){return~~(+e/36e5)}},{type:"day",minstep:1,step:[1,7],format:"%Y %b %-d",date:function(e){return new Date(864e5*e)},unit:function(e){return~~(+e/864e5)}},{type:"month",minstep:1,step:[1,3,6],format:"%b %Y",date:function(e){return new Date(Date.UTC(~~(e/12),e%12,1))},unit:function(e){return r(e)&&(e=new Date(e)),12*e.getUTCFullYear()+e.getUTCMonth()}},{type:"year",minstep:1,format:"%Y",date:function(e){return new Date(Date.UTC(e,0,1))},unit:function(e){return(r(e)?new Date(e):e).getUTCFullYear()}}],o={type:"minuteOfHour",min:0,max:59,minstep:1,format:"%M",date:function(e){return new Date(Date.UTC(1970,0,1,0,e))},unit:function(e){return(r(e)?new Date(e):e).getUTCMinutes()}},f={type:"hourOfDay",min:0,max:23,minstep:1,format:"%H",date:function(e){return new Date(Date.UTC(1970,0,1,e))},unit:function(e){return(r(e)?new Date(e):e).getUTCHours()}},s={type:"dayOfWeek",min:0,max:6,step:[1],format:"%a",date:function(e){return new Date(Date.UTC(1970,0,4+e))},unit:function(e){return(r(e)?new Date(e):e).getUTCDay()}},u={type:"dayOfMonth",min:1,max:31,step:[1],format:"%-d",date:function(e){return new Date(Date.UTC(1970,0,e))},unit:function(e){return(r(e)?new Date(e):e).getUTCDate()}},c={type:"monthOfYear",min:0,max:11,
step:[1],format:"%b",date:function(e){return new Date(Date.UTC(1970,e%12,1))},unit:function(e){return(r(e)?new Date(e):e).getUTCMonth()}},l={second:i[0],minute:i[1],hour:i[2],day:i[3],month:i[4],year:i[5],minuteOfHour:o,hourOfDay:f,dayOfWeek:s,dayOfMonth:u,monthOfYear:c,timesteps:i};l.find=function(e,t,n){var r,o,f,s=a[0];for(r=1,o=a.length;o>r;++r)if(s=a[r],e>s[0]){if(f=e/s[0],f>n)return i[a[r-1][1]];if(f>=t)return i[s[1]]}return i[a[a.length-1][1]]},t.exports=l},{}],24:[function(e,t,n){(function(n){function r(e){return e.replace(l,"$1\\'")}function a(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function i(e,t,n){var r=0,a=e.split(d);return e=n?(a=a.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():a.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():a[0].slice(0,t)}var o=e("buffer"),f=e("./time-units"),s=t.exports={};s.isNode="undefined"!=typeof n&&"undefined"!=typeof n.stderr;var u="__name__";s.namedfunc=function(e,t){return t[u]=e,t},s.name=function(e){return null==e?null:e[u]},s.identity=function(e){return e},s["true"]=s.namedfunc("true",function(){return!0}),s["false"]=s.namedfunc("false",function(){return!1}),s.duplicate=function(e){return JSON.parse(JSON.stringify(e))},s.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},s.extend=function(e){for(var t,n,r=1,a=arguments.length;a>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},s.length=function(e){return null!=e&&null!=e.length?e.length:null},s.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},s.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},s.toMap=function(e,t){return(t=s.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},s.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var c=Object.prototype.toString;s.isObject=function(e){return e===Object(e)},s.isFunction=function(e){return"[object Function]"===c.call(e)},s.isString=function(e){return"string"==typeof value||"[object String]"===c.call(e)},s.isArray=Array.isArray||function(e){return"[object Array]"===c.call(e)},s.isNumber=function(e){return"number"==typeof e||"[object Number]"===c.call(e)},s.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},s.isDate=function(e){return"[object Date]"===c.call(e)},s.isValid=function(e){return null!=e&&e===e},s.isBuffer=o.Buffer&&o.Buffer.isBuffer||s["false"],s.number=function(e){return null==e||""===e?null:+e},s["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},s.date=function(e){return null==e||""===e?null:Date.parse(e)},s.array=function(e){return null!=e?s.isArray(e)?e:[e]:[]},s.str=function(e){return s.isArray(e)?"["+e.map(s.str)+"]":s.isObject(e)?JSON.stringify(e):s.isString(e)?"'"+r(e)+"'":e};var l=/(^|[^\\])'/g;s.field=function(e){return String(e).split("\\.").map(function(e){return e.split(".")}).reduce(function(e,t){return e.length&&(e[e.length-1]+="."+t.shift()),e.push.apply(e,t),e},[])},s.accessor=function(e){var t;return null==e||s.isFunction(e)?e:s.namedfunc(e,(t=s.field(e)).length>1?function(e){return t.reduce(function(e,t){return e[t]},e)}:function(t){return t[e]})},s.$=s.accessor,s.mutator=function(e){var t;return s.isString(e)&&(t=s.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},s.$func=function(e,t){return function(n){n=s.$(n)||s.identity;var r=e+(s.name(n)?"_"+s.name(n):"");return s.namedfunc(r,function(e){return t(n(e))})}},s.$valid=s.$func("valid",s.isValid),s.$length=s.$func("length",s.length),s.$year=s.$func("year",f.year.unit),s.$month=s.$func("month",f.monthOfYear.unit),s.$date=s.$func("date",f.dayOfMonth.unit),s.$day=s.$func("day",f.dayOfWeek.unit),s.$hour=s.$func("hour",f.hourOfDay.unit),s.$minute=s.$func("minute",f.minuteOfHour.unit),s.$in=function(e,t){e=s.$(e);var n=s.isArray(t)?s.toMap(t):t;return function(t){return!!n[e(t)]}},s.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=s.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),s.accessor(e)}),function(n,r){var a,i,o,f,s;for(a=0,i=e.length;i>a;++a){if(o=e[a],f=o(n),s=o(r),s>f)return-1*t[a];if(f>s)return t[a]}return 0}},s.cmp=function(e,t){return t>e?-1:e>t?1:e>=t?0:null===e?-1:null===t?1:0/0},s.numcmp=function(e,t){return e-t},s.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,a){var i=t(e),o=t(a);return o>i?-1:i>o?1:r[n(e)]-r[n(a)]}),e},s.startsWith=String.prototype.startsWith?function(e,t){return e.startsWith(t)}:function(e,t){return 0===e.lastIndexOf(t,0)},s.pad=function(e,t,n,r){r=r||" ";var i=t-e.length;if(0>=i)return e;switch(n){case"left":return a(i,r)+e;case"middle":case"center":return a(Math.floor(i/2),r)+e+a(Math.ceil(i/2),r);default:return e+a(i,r)}},s.truncate=function(e,t,n,r,a){var o=e.length;if(t>=o)return e;a=void 0!==a?String(a):"â€¦";var f=Math.max(0,t-a.length);switch(n){case"left":return a+(r?i(e,f,1):e.slice(o-f));case"middle":case"center":var s=Math.ceil(f/2),u=Math.floor(f/2);return(r?i(e,s):e.slice(0,s))+a+(r?i(e,u,1):e.slice(o-u));default:return(r?i(e,f):e.slice(0,f))+a}};var d=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("_process"))},{"./time-units":23,_process:3,buffer:2}]},{},[1])(1)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.vl=e()}}(function(){return function e(t,n,r){function a(o,f){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!f&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return a(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";e("./globals");var r=e("./util"),a=e("./consts"),i={};r.extend(i,a,r),i.Encoding=e("./Encoding"),i.compile=e("./compile/compile"),i.data=e("./data"),i.field=e("./field"),i.enc=e("./enc"),i.schema=e("./schema/schema"),i.toShorthand=i.Encoding.shorthand,t.exports=i},{"./Encoding":10,"./compile/compile":14,"./consts":28,"./data":29,"./enc":30,"./field":31,"./globals":32,"./schema/schema":38,"./util":40}],2:[function(e,t,n){},{}],3:[function(e,t,n){function r(){if(!f){f=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}f=!1}}function a(){}var i=t.exports={},o=[],f=!1;i.nextTick=function(e){o.push(e),f||setTimeout(r,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=a,i.addListener=a,i.once=a,i.off=a,i.removeListener=a,i.removeAllListeners=a,i.emit=a,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],4:[function(e,t,n){function r(e){e=e||{};var t,n,r,f,s,u,c,l=e.maxbins||15,d=e.base||10,p=Math.log(d),h=e.div||[5,2],m=e.min,g=e.max,b=g-m;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,a(e.steps,b/l,0,e.steps.length))];else{n=Math.ceil(Math.log(l)/p),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(b)/p)-n));do t*=d;while(Math.ceil(b/t)>l);for(u=0;u<h.length;++u)s=t/h[u],s>=r&&l>=b/s&&(t=s)}return s=Math.log(t),f=s>=0?0:~~(-s/p)+1,c=Math.pow(d,-f-1),m=Math.min(m,Math.floor(m/t+c)*t),g=Math.ceil(g/t)*t,{start:m,stop:g,step:t,unit:{precision:f},value:i,index:o}}function a(e,t,n,r){for(;r>n;){var a=n+r>>>1;u.cmp(e[a],t)<0?n=a+1:r=a}return n}function i(e){return this.step*Math.floor(e/this.step+l)}function o(e){return Math.floor((e-this.start)/this.step+l)}function f(e){return this.unit.date(i.call(this,e))}function s(e){return o.call(this,this.unit.unit(e))}var u=e("../util"),c=e("../time-units"),l=1e-15;r.date=function(e){e=e||{};var t=e.min,n=e.max,a=e.maxbins||20,i=e.minbins||4,o=+n-+t,u=e.unit?c[e.unit]:c.find(o,i,a),l=r({min:null!=u.min?u.min:u.unit(t),max:null!=u.max?u.max:u.unit(n),maxbins:a,minstep:u.minstep,steps:u.step});return l.unit=u,l.index=s,e.raw||(l.value=f),l},t.exports=r},{"../time-units":8,"../util":9}],5:[function(e,t,n){var r=t.exports={};r.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},r.zeros=function(e){return r.repeat(0,e)},r.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,a=[],i=-1;if(0>n)for(;(r=e+n*++i)>t;)a.push(r);else for(;(r=e+n*++i)<t;)a.push(r);return a},r.random={},r.random.uniform=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,a=function(){return e+n*Math.random()};return a.samples=function(e){return r.zeros(e).map(a)},a},r.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,a=function(){return e+Math.floor(n*Math.random())};return a.samples=function(e){return r.zeros(e).map(a)},a},r.random.normal=function(e,t){e=e||0,t=t||1;var n,a=function(){var r,a,i=0,o=0;if(void 0!==n)return i=n,n=void 0,i;do i=2*Math.random()-1,o=2*Math.random()-1,r=i*i+o*o;while(0===r||r>1);return a=Math.sqrt(-2*Math.log(r)/r),n=e+o*a*t,e+i*a*t};return a.samples=function(e){return r.zeros(e).map(a)},a}},{}],6:[function(e,t,n){function r(e,t){return t?void(e[u]=t):e&&e[u]||null}function a(e,t){t=s.$(t);var n,r,a;if(e[u]&&(n=t(e[u]),s.isString(n)))return n;for(r=0,a=e.length;!s.isValid(n)&&a>r;++r)n=t?t(e[r]):e[r];return s.isDate(n)?"date":s.isNumber(n)?"number":s.isBoolean(n)?"boolean":s.isString(n)?"string":null}function i(e,t){return e.length?(t=t||s.keys(e[0]),t.reduce(function(t,n){return t[n]=a(e,n),t},{})):void 0}function o(e,t){t=s.$(t);var n,r,a,i=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(a=t?t(e[n]):e[n],r=0;r<i.length;++r)s.isValid(a)&&!l[i[r]](a)&&(i.splice(r,1),r-=1);if(0===i.length)return"string"}return i[0]}function f(e,t){return t=t||s.keys(e[0]),t.reduce(function(t,n){var r=o(e,n);return c[r]&&(t[n]=r),t},{})}var s=e("../util"),u="__types__",c={"boolean":s["boolean"],integer:s.number,number:s.number,date:s.date,string:function(e){return""===e?null:e}},l={"boolean":function(e){return"true"===e||"false"===e||s.isBoolean(e)},integer:function(e){return l.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!s.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};a.annotation=r,a.all=i,a.infer=o,a.inferAll=f,a.parsers=c,t.exports=a},{"../util":9}],7:[function(e,t,n){var r=e("./util"),a=e("./import/type"),i=e("./generate"),o={};o.unique=function(e,t,n){t=r.$(t),n=n||[];var a,i,o,f={};for(i=0,o=e.length;o>i;++i)a=t?t(e[i]):e[i],a in f||(f[a]=1,n.push(a));return n},o.count=function(e){return e&&e.length||0},o.count.valid=function(e,t){t=r.$(t);var n,a,i,o=0;for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],r.isValid(n)&&(o+=1);return o},o.count.missing=function(e,t){t=r.$(t);var n,a,i,o=0;for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],null==n&&(o+=1);return o},o.count.distinct=function(e,t){t=r.$(t);var n,a,i,o={},f=0;for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],n in o||(o[n]=1,f+=1);return f},o.count.map=function(e,t){t=r.$(t);var n,a,i,o={};for(a=0,i=e.length;i>a;++a)n=t?t(e[a]):e[a],o[n]=n in o?o[n]+1:1;return o},o.median=function(e,t){return t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp),o.quantile(e,.5)},o.quartile=function(e,t){t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp);var n=o.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},o.quantile=function(e,t,n){void 0===n&&(n=t,t=r.identity),t=r.$(t);var a=(e.length-1)*n+1,i=Math.floor(a),o=+t(e[i-1]),f=a-i;return f?o+f*(t(e[i])-o):o},o.sum=function(e,t){t=r.$(t);for(var n,a=0,i=0,o=e.length;o>i;++i)n=t?t(e[i]):e[i],r.isValid(n)&&(a+=n);return a},o.mean=function(e,t){t=r.$(t);var n,a,i,o,f,s=0;for(a=0,o=0,i=e.length;i>a;++a)f=t?t(e[a]):e[a],r.isValid(f)&&(n=f-s,s+=n/++o);return s},o.variance=function(e,t){if(t=r.$(t),!r.isArray(e)||0===e.length)return 0;var n,a,i,o,f=0,s=0;for(a=0,i=0;a<e.length;++a)o=t?t(e[a]):e[a],r.isValid(o)&&(n=o-f,f+=n/++i,s+=n*(o-f));return s/=i-1},o.stdev=function(e,t){return Math.sqrt(o.variance(e,t))},o.modeskew=function(e,t){var n=o.mean(e,t),r=o.median(e,t),a=o.stdev(e,t);return 0===a?0:(n-r)/a},o.min=function(e,t){return o.extent(e,t)[0]},o.max=function(e,t){return o.extent(e,t)[1]},o.extent=function(e,t){t=r.$(t);var n,a,i,o,f=e.length;for(o=0;f>o;++o)if(i=t?t(e[o]):e[o],r.isValid(i)){n=a=i;break}for(;f>o;++o)i=t?t(e[o]):e[o],r.isValid(i)&&(n>i&&(n=i),i>a&&(a=i));return[n,a]},o.extent.index=function(e,t){t=r.$(t);var n,a,i,o,f=-1,s=-1,u=e.length;for(o=0;u>o;++o)if(i=t?t(e[o]):e[o],r.isValid(i)){n=a=i,f=s=o;break}for(;u>o;++o)i=t?t(e[o]):e[o],r.isValid(i)&&(n>i&&(n=i,f=o),i>a&&(a=i,s=o));return[f,s]},o.dot=function(e,t,n){var a,i,o=0;if(n)for(t=r.$(t),n=r.$(n),a=0;a<e.length;++a)i=t(e[a])*n(e[a]),Number.isNaN(i)||(o+=i);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(a=0;a<e.length;++a)i=e[a]*t[a],Number.isNaN(i)||(o+=i)}return o},o.rank=function(e,t){t=r.$(t)||r.identity;var n,a,i,o=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(r.comparator("val")),f=e.length,s=Array(f),u=-1,c={};for(n=0;f>n;++n){if(a=o[n].val,0>u&&c===a)u=n-1;else if(u>-1&&c!==a){for(i=1+(n-1+u)/2;n>u;++u)s[o[u].idx]=i;u=-1}s[o[n].idx]=n+1,c=a}if(u>-1)for(i=1+(f-1+u)/2;f>u;++u)s[o[u].idx]=i;return s},o.cor=function(e,t,n){var a=n;n=a?e.map(r.$(n)):t,t=a?e.map(r.$(t)):e;var i=o.dot(t,n),f=o.mean(t),s=o.mean(n),u=o.stdev(t),c=o.stdev(n),l=e.length;return(i-l*f*s)/((l-1)*u*c)},o.cor.rank=function(e,t,n){var a,i,f,s=n?o.rank(e,r.$(t)):o.rank(e),u=n?o.rank(e,r.$(n)):o.rank(t),c=e.length;for(a=0,i=0;c>a;++a)f=s[a]-u[a],i+=f*f;return 1-6*i/(c*(c*c-1))},o.cor.dist=function(e,t,n){var a,i,f,s,u=n?e.map(r.$(t)):e,c=n?e.map(r.$(n)):t,l=o.dist.mat(u),d=o.dist.mat(c),p=l.length;for(a=0,i=0,f=0,s=0;p>a;++a)i+=l[a]*l[a],f+=d[a]*d[a],s+=l[a]*d[a];return Math.sqrt(s/Math.sqrt(i*f))},o.dist=function(e,t,n,a){var i,o,f=r.isFunction(n)||r.isString(n),s=e,u=f?e:t,c=f?a:n,l=2===c||null==c,d=e.length,p=0;for(f&&(t=r.$(t),n=r.$(n)),o=0;d>o;++o)i=f?t(s[o])-n(u[o]):s[o]-u[o],p+=l?i*i:Math.pow(Math.abs(i),c);return l?Math.sqrt(p):Math.pow(p,1/c)},o.dist.mat=function(e){var t,n,r,a=e.length,o=a*a,f=Array(o),s=i.zeros(a),u=0;for(n=0;a>n;++n)for(f[n*a+n]=0,r=n+1;a>r;++r)f[n*a+r]=t=Math.abs(e[n]-e[r]),f[r*a+n]=t,s[n]+=t,s[r]+=t;for(n=0;a>n;++n)u+=s[n],s[n]/=a;for(u/=o,n=0;a>n;++n)for(r=n;a>r;++r)f[n*a+r]+=u-s[n]-s[r],f[r*a+n]=f[n*a+r];return f},o.entropy=function(e,t){t=r.$(t);var n,a,i=0,o=0,f=e.length;for(n=0;f>n;++n)i+=t?t(e[n]):e[n];if(0===i)return 0;for(n=0;f>n;++n)a=(t?t(e[n]):e[n])/i,a&&(o+=a*Math.log(a));return-o/Math.LN2},o.mutual=function(e,t,n,a){var i,o,f,s=a?e.map(r.$(t)):e,u=a?e.map(r.$(n)):t,c=a?e.map(r.$(a)):n,l={},d={},p=c.length,h=0,m=0,g=0;for(f=0;p>f;++f)l[s[f]]=0,d[u[f]]=0;for(f=0;p>f;++f)l[s[f]]+=c[f],d[u[f]]+=c[f],h+=c[f];for(o=1/(h*Math.LN2),f=0;p>f;++f)0!==c[f]&&(i=h*c[f]/(l[s[f]]*d[u[f]]),m+=c[f]*o*Math.log(i),g+=c[f]*o*Math.log(c[f]/h));return[m,1+m/g]},o.mutual.info=function(e,t,n,r){return o.mutual(e,t,n,r)[0]},o.mutual.dist=function(e,t,n,r){return o.mutual(e,t,n,r)[1]},o.profile=function(e,t){var n,i,f,s,u,c=0,l=0,d=0,p=0,h=null,m=null,g=0,b=[],y={};for(f=0;f<e.length;++f)s=t?t(e[f]):e[f],y[s]=s in y?y[s]+1:(p+=1,1),null==s?++d:r.isValid(s)&&(u="string"==typeof s?s.length:s,(null===h||h>u)&&(h=u),(null===m||u>m)&&(m=u),n=u-c,c+=n/++l,g+=n*(u-c),b.push(u));return g/=l-1,i=Math.sqrt(g),b.sort(r.cmp),{type:a(e,t),unique:y,count:e.length,valid:l,missing:d,distinct:p,min:h,max:m,mean:c,stdev:i,median:s=o.quantile(b,.5),q1:o.quantile(b,.25),q3:o.quantile(b,.75),modeskew:0===i?0:(c-s)/i}},o.summary=function(e,t){t=t||r.keys(e[0]);var n=t.map(function(t){var n=o.profile(e,r.$(t));return n.field=t,n});return n.__summary__=!0,n},t.exports=o},{"./generate":5,"./import/type":6,"./util":9}],8:[function(e,t,n){function r(e){return"number"==typeof e}var a=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]],i=[{type:"second",minstep:1,format:"%Y %b %-d %H:%M:%S.%L",date:function(e){return new Date(1e3*e)},unit:function(e){return+e/1e3}},{type:"minute",minstep:1,format:"%Y %b %-d %H:%M",date:function(e){return new Date(6e4*e)},unit:function(e){return~~(+e/6e4)}},{type:"hour",minstep:1,format:"%Y %b %-d %H:00",date:function(e){return new Date(36e5*e)},unit:function(e){return~~(+e/36e5)}},{type:"day",minstep:1,step:[1,7],format:"%Y %b %-d",date:function(e){return new Date(864e5*e)},unit:function(e){return~~(+e/864e5)}},{type:"month",minstep:1,step:[1,3,6],format:"%b %Y",date:function(e){return new Date(Date.UTC(~~(e/12),e%12,1))},unit:function(e){return r(e)&&(e=new Date(e)),12*e.getUTCFullYear()+e.getUTCMonth()}},{type:"year",minstep:1,format:"%Y",date:function(e){return new Date(Date.UTC(e,0,1))},unit:function(e){return(r(e)?new Date(e):e).getUTCFullYear()}}],o={type:"minuteOfHour",min:0,max:59,minstep:1,format:"%M",date:function(e){return new Date(Date.UTC(1970,0,1,0,e))},unit:function(e){return(r(e)?new Date(e):e).getUTCMinutes()}},f={type:"hourOfDay",min:0,max:23,minstep:1,format:"%H",date:function(e){return new Date(Date.UTC(1970,0,1,e))},unit:function(e){return(r(e)?new Date(e):e).getUTCHours()}},s={type:"dayOfWeek",min:0,max:6,step:[1],format:"%a",date:function(e){return new Date(Date.UTC(1970,0,4+e))},unit:function(e){return(r(e)?new Date(e):e).getUTCDay()}},u={type:"dayOfMonth",min:1,max:31,step:[1],format:"%-d",date:function(e){return new Date(Date.UTC(1970,0,e))},unit:function(e){return(r(e)?new Date(e):e).getUTCDate()}},c={type:"monthOfYear",min:0,max:11,step:[1],format:"%b",date:function(e){return new Date(Date.UTC(1970,e%12,1))},unit:function(e){return(r(e)?new Date(e):e).getUTCMonth()}},l={second:i[0],minute:i[1],hour:i[2],day:i[3],month:i[4],year:i[5],minuteOfHour:o,hourOfDay:f,dayOfWeek:s,dayOfMonth:u,monthOfYear:c,timesteps:i};l.find=function(e,t,n){var r,o,f,s=a[0];for(r=1,o=a.length;o>r;++r)if(s=a[r],e>s[0]){if(f=e/s[0],f>n)return i[a[r-1][1]];if(f>=t)return i[s[1]]}return i[a[a.length-1][1]]},t.exports=l},{}],9:[function(e,t,n){(function(n){function r(e){return e.replace(l,"$1\\'")}function a(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function i(e,t,n){var r=0,a=e.split(d);return e=n?(a=a.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():a.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():a[0].slice(0,t)}var o=e("buffer").Buffer,f=e("./time-units"),s=t.exports={};s.isNode="undefined"!=typeof n&&"undefined"!=typeof n.stderr;var u="__name__";s.namedfunc=function(e,t){return t[u]=e,t},s.name=function(e){return null==e?null:e[u]},s.identity=function(e){return e},s["true"]=s.namedfunc("true",function(){return!0}),s["false"]=s.namedfunc("false",function(){return!1}),s.duplicate=function(e){return JSON.parse(JSON.stringify(e))},s.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},s.extend=function(e){for(var t,n,r=1,a=arguments.length;a>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},s.length=function(e){return null!=e&&null!=e.length?e.length:null},s.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},s.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},s.toMap=function(e,t){return(t=s.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},s.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var c=Object.prototype.toString;s.isObject=function(e){return e===Object(e)},s.isFunction=function(e){return"[object Function]"===c.call(e)},s.isString=function(e){return"string"==typeof value||"[object String]"===c.call(e)},s.isArray=Array.isArray||function(e){return"[object Array]"===c.call(e)},s.isNumber=function(e){return"number"==typeof e||"[object Number]"===c.call(e)},s.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},s.isDate=function(e){return"[object Date]"===c.call(e)},s.isValid=function(e){return null!=e&&!Number.isNaN(e)},s.isBuffer=o&&o.isBuffer||s["false"],s.number=function(e){return null==e||""===e?null:+e},s["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},s.date=function(e){return null==e||""===e?null:Date.parse(e)},s.array=function(e){return null!=e?s.isArray(e)?e:[e]:[]},s.str=function(e){return s.isArray(e)?"["+e.map(s.str)+"]":s.isObject(e)?JSON.stringify(e):s.isString(e)?"'"+r(e)+"'":e};var l=/(^|[^\\])'/g;s.field=function(e){return String(e).split("\\.").map(function(e){return e.split(".")}).reduce(function(e,t){return e.length&&(e[e.length-1]+="."+t.shift()),e.push.apply(e,t),e},[])},s.accessor=function(e){var t;return null==e||s.isFunction(e)?e:s.namedfunc(e,(t=s.field(e)).length>1?function(e){return t.reduce(function(e,t){return e[t]},e)}:function(t){return t[e]})},s.$=s.accessor,s.mutator=function(e){var t;return s.isString(e)&&(t=s.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},s.$func=function(e,t){return function(n){n=s.$(n)||s.identity;var r=e+(s.name(n)?"_"+s.name(n):"");return s.namedfunc(r,function(e){return t(n(e))})}},s.$valid=s.$func("valid",s.isValid),s.$length=s.$func("length",s.length),s.$year=s.$func("year",f.year.unit),s.$month=s.$func("month",f.monthOfYear.unit),s.$date=s.$func("date",f.dayOfMonth.unit),s.$day=s.$func("day",f.dayOfWeek.unit),s.$hour=s.$func("hour",f.hourOfDay.unit),s.$minute=s.$func("minute",f.minuteOfHour.unit),s.$in=function(e,t){e=s.$(e);var n=s.isArray(t)?s.toMap(t):t;return function(t){return!!n[e(t)]}},s.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=s.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),s.accessor(e)}),function(n,r){var a,i,o,f,s;for(a=0,i=e.length;i>a;++a){if(o=e[a],f=o(n),s=o(r),s>f)return-1*t[a];if(f>s)return t[a]}return 0}},s.cmp=function(e,t){return t>e?-1:e>t?1:e>=t?0:null===e&&null===t?0:null===e?-1:null===t?1:0/0},s.numcmp=function(e,t){return e-t},s.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,a){var i=t(e),o=t(a);return o>i?-1:i>o?1:r[n(e)]-r[n(a)]}),e},s.startsWith=String.prototype.startsWith?function(e,t){return e.startsWith(t)}:function(e,t){return 0===e.lastIndexOf(t,0)},s.pad=function(e,t,n,r){r=r||" ";var i=t-e.length;if(0>=i)return e;switch(n){case"left":return a(i,r)+e;case"middle":case"center":return a(Math.floor(i/2),r)+e+a(Math.ceil(i/2),r);default:return e+a(i,r)}},s.truncate=function(e,t,n,r,a){var o=e.length;if(t>=o)return e;a=void 0!==a?String(a):"â€¦";var f=Math.max(0,t-a.length);switch(n){case"left":return a+(r?i(e,f,1):e.slice(o-f));case"middle":case"center":var s=Math.ceil(f/2),u=Math.floor(f/2);return(r?i(e,s):e.slice(0,s))+a+(r?i(e,u,1):e.slice(o-u));default:return(r?i(e,f):e.slice(0,f))+a}};var d=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("_process"))},{"./time-units":8,_process:3,buffer:2}],10:[function(e,t,n){"use strict";e("./globals");var r=e("./consts"),a=e("./util"),i=e("./field"),o=e("./enc"),f=e("./schema/schema");t.exports=function(){function e(e,t){var n=f.instantiate(),r=f.util.merge(n,t||{},e);this._data=r.data,this._marktype=r.marktype,this._enc=r.encoding,this._config=r.config,this._filter=r.filter}var t=e.prototype;return e.fromShorthand=function(t,n,a,i){var f=r.shorthand,s=t.split(f.delim),u=s.shift().split(f.assign)[1].trim(),c=o.fromShorthand(s);return new e({data:n,marktype:u,encoding:c,config:a,filter:[]},i)},e.fromSpec=function(t,n){return new e(t,n)},t.toShorthand=function(){var e=r.shorthand;return"mark"+e.assign+this._marktype+e.delim+o.shorthand(this._enc)},e.shorthand=function(e){var t=r.shorthand;return"mark"+t.assign+e.marktype+t.delim+o.shorthand(e.encoding)},e.specFromShorthand=function(t,n,r,a){return e.fromShorthand(t,n,r).toSpec(a)},t.toSpec=function(e,t){var n,r=a.duplicate(this._enc);n={marktype:this._marktype,encoding:r,filter:this._filter},e||(n.config=a.duplicate(this._config)),t||(n.data=a.duplicate(this._data));var i=f.instantiate();return f.util.subtract(n,i)},t.marktype=function(){return this._marktype},t.is=function(e){return this._marktype===e},t.has=function(e){return void 0!==this._enc[e].name},t.enc=function(e){return this._enc[e]},t.filter=function(){var e=[],t=this.fields(),n=this;return a.forEach(t,function(t,r){"*"!==r&&(n.config("filterNull").Q&&t.containsType[Q]||n.config("filterNull").T&&t.containsType[T]||n.config("filterNull").O&&t.containsType[O]||n.config("filterNull").N&&t.containsType[N])&&e.push({operands:[r],operator:"notNull"})}),e.concat(this._filter)},t.field=function(e,t,n){if(!this.has(e))return null;var r=t?"":"data.";return i.isCount(this._enc[e])?r+"count":!n&&this._enc[e].bin?r+"bin_"+this._enc[e].name:!n&&this._enc[e].aggregate?r+this._enc[e].aggregate+"_"+this._enc[e].name:!n&&this._enc[e].fn?r+this._enc[e].fn+"_"+this._enc[e].name:r+this._enc[e].name},t.fieldName=function(e){return this._enc[e].name},t.fields=function(){return o.fields(this._enc)},t.fieldTitle=function(e){if(i.isCount(this._enc[e]))return i.count.displayName;var t=this._enc[e].aggregate||this._enc[e].fn||this._enc[e].bin&&"bin";return t?t.toUpperCase()+"("+this._enc[e].name+")":this._enc[e].name},t.scale=function(e){return this._enc[e].scale||{}},t.axis=function(e){return this._enc[e].axis||{}},t.band=function(e){return this._enc[e].band||{}},t.bandSize=function(e,t){return t=t||e===Y&&this.has(ROW)&&this.has(Y)||e===X&&this.has(COL)&&this.has(X),this.band(e).size||this.config(t?"smallBandSize":"largeBandSize")},t.aggregate=function(e){return this._enc[e].aggregate},t.bin=function(e){var t=this._enc[e].bin;return t==={}?!1:t===!0?{maxbins:f.MAXBINS_DEFAULT}:t},t.legend=function(e){return this._enc[e].legend},t.value=function(e){return this._enc[e].value},t.fn=function(e){return this._enc[e].fn},t.sort=function(t,n){var r=this._enc[t].sort,a=this._enc,o=i.isTypes;if((!r||0===r.length)&&e.toggleSort.support({enc:this._enc},n,!0)&&this.config("toggleSort")===Q){var f=o(a.x,[N,O])?a.y:a.x;o(a[t],[N,O])&&(r=[{name:f.name,aggregate:f.aggregate,type:f.type,reverse:!0}])}return r},t.length=function(){return a.keys(this._enc).length},t.map=function(e){return o.map(this._enc,e)},t.reduce=function(e,t){return o.reduce(this._enc,e,t)},t.forEach=function(e){return o.forEach(this._enc,e)},t.type=function(e){return this.has(e)?this._enc[e].type:null},t.role=function(e){return this.has(e)?i.role(this._enc[e]):null},t.text=function(e){var t=this._enc[TEXT].text;return e?t[e]:t},t.font=function(e){var t=this._enc[TEXT].font;return e?t[e]:t},t.isType=function(t,n){var r=this.enc(t);return r&&e.isType(r,n)},e.isType=i.isType,e.isOrdinalScale=function(e,t){return i.isOrdinalScale(e.enc(t))},e.isDimension=function(e,t){return i.isDimension(e.enc(t))},e.isMeasure=function(e,t){return i.isMeasure(e.enc(t))},t.isOrdinalScale=function(t){return this.has(t)&&e.isOrdinalScale(this,t)},t.isDimension=function(t){return this.has(t)&&e.isDimension(this,t)},t.isMeasure=function(t){return this.has(t)&&e.isMeasure(this,t)},t.isAggregate=function(){return o.isAggregate(this._enc)},e.isAggregate=function(e){return o.isAggregate(e.encoding)},e.alwaysNoOcclusion=function(e){return o.isAggregate(e.encoding)},e.isStack=function(e){return("bar"===e.marktype||"area"===e.marktype)&&e.encoding.color},t.isStack=function(){return(this.is("bar")||this.is("area"))&&this.has("color")},t.cardinality=function(e,t){return i.cardinality(this.enc(e),t,this.config("filterNull"))},t.isRaw=function(){return!this.isAggregate()},t.data=function(e){return this._data[e]},t.hasValues=function(){var e=this.data("values");return e&&e.length},t.config=function(e){return this._config[e]},e.transpose=function(e){var t=e.encoding,n=a.duplicate(e.encoding);return n.x=t.y,n.y=t.x,n.row=t.col,n.col=t.row,e.encoding=n,e},e.toggleSort=function(e){return e.config=e.config||{},e.config.toggleSort=e.config.toggleSort===Q?N:Q,e},e.toggleSort.direction=function(t){if(e.toggleSort.support(t)){var n=t.encoding;return n.x.type===N?"x":"y"}},e.toggleSort.mode=function(e){return e.config.toggleSort},e.toggleSort.support=function(t,n){var r=t.encoding,a=i.isTypes;return!o.has(r,ROW)&&!o.has(r,COL)&&o.has(r,X)&&o.has(r,Y)&&e.alwaysNoOcclusion(t,n)?a(r.x,[N,O])&&i.isMeasure(r.y)?"x":a(r.y,[N,O])&&i.isMeasure(r.x)?"y":!1:!1},e.toggleFilterNullO=function(e){return e.config=e.config||{},e.config.filterNull=e.config.filterNull||{T:!0,Q:!0},e.config.filterNull.O=!e.config.filterNull.O,e},e.toggleFilterNullO.support=function(e,t){var n=o.fields(e.encoding);for(var r in n){var a=n[r];if(a.containsType.O&&r in t&&t[r].nulls>0)return!0}return!1},e}()},{"./consts":28,"./enc":30,"./field":31,"./globals":32,"./schema/schema":38,"./util":40}],11:[function(e,t,n){"use strict";function r(e,t,n){n=n||{};var r={},i={},o={},f={},s=e.data[1];return t.forEach(function(e,n){e.aggregate?"count"===e.aggregate?i.count={op:"count",field:"*"}:i[e.aggregate+"|"+e.name]={op:e.aggregate,field:"data."+e.name}:(r[e.name]=t.field(n),n==ROW||n==COL?f[e.name]=r[e.name]:n!==X&&n!==Y&&(o[e.name]=r[e.name]))}),r=a.vals(r),i=a.vals(i),i.length>0&&(s.transform||(s.transform=[]),s.transform.push({type:"aggregate",groupby:r,fields:i})),{details:a.vals(o),dims:r,facets:a.vals(f),aggregated:i.length>0}}e("../globals");var a=e("../util");t.exports=r},{"../globals":32,"../util":40}],12:[function(e,t,n){"use strict";function r(e,t,n,r,a){var s=null,u=n.fieldTitle(t);return t===X?s=r.cellWidth/n.config("characterWidth"):t===Y&&(s=r.cellHeight/n.config("characterWidth")),e.title=s?o.truncate(u,s):u,t===ROW&&f(e,["properties","title"],{angle:{value:0},align:{value:"right"},baseline:{value:"middle"},dy:{value:-r.height/2-20}}),e.titleOffset=i(n,r,t),e}function a(e,t,n,r,a){var i;n.isType(t,T)&&(i=n.fn(t))&&u.hasScale(i)&&f(e,["properties","labels","text","scale"],"time-"+i);var o=["properties","labels","text","template"];return n.axis(t).format?e.format=n.axis(t).format:n.isType(t,Q)?f(e,o,"{{data | number:'.3s'}}"):n.isType(t,T)?n.fn(t)?"year"===n.fn(t)&&f(e,o,"{{data | number:'d'}}"):f(e,o,"{{data | time:'%Y-%m-%d'}}"):n.isType(t,[N,O])&&n.axis(t).maxLabelLength&&f(e,o,"{{data | truncate:"+n.axis(t).maxLabelLength+"}}"),e}function i(e,t,n){var r=e.axis(n).titleOffset;if(r)return r;switch(n){case ROW:return 0;case COL:return 35}return s(t,[n,"axisTitleOffset"])}e("../globals");var o=e("../util"),f=o.setter,s=o.getter,u=e("./time"),c=t.exports={};c.names=function(e){return o.keys(o.keys(e).reduce(function(t,n){var r=e[n].scale;return(r===X||r===Y)&&(t[e[n].scale]=1),t},{}))},c.defs=function(e,t,n,r,a){return e.reduce(function(e,i){return e.push(c.def(i,t,n,r,a)),e},[])},c.def=function(e,t,n,o,s){var u=e,c=e==COL,l=e==ROW,d=i(t,n,Y)+20,p=n.cellPadding;c&&(u="x"),l&&(u="y");var h={type:u,scale:e};return t.axis(e).grid&&(h.grid=!0,h.layer="back",c?f(h,["properties","grid"],{x:{offset:n.cellWidth*(1+p/2),scale:"col"},y:{value:-n.cellHeight*(p/2)},stroke:{value:t.config("cellGridColor")},opacity:{value:t.config("cellGridOpacity")}}):l?f(h,["properties","grid"],{y:{offset:-n.cellHeight*(p/2),scale:"row"},x:{value:d},x2:{offset:d+.05*n.cellWidth,group:"mark.group.width",mult:1},stroke:{value:t.config("cellGridColor")},opacity:{value:t.config("cellGridOpacity")}}):f(h,["properties","grid"],{stroke:{value:t.config("gridColor")},opacity:{value:t.config("gridOpacity")}})),t.axis(e).title&&(h=r(h,e,t,n,s)),
(l||c)&&(f(h,["properties","ticks"],{opacity:{value:0}}),f(h,["properties","majorTicks"],{opacity:{value:0}}),f(h,["properties","axis"],{opacity:{value:0}})),c&&(h.orient="top"),l&&(h.offset=d),e==X&&(t.has(Y)&&t.isOrdinalScale(Y)&&t.cardinality(Y,o)>30&&(h.orient="top"),t.isDimension(X)||t.isType(X,T)?f(h,["properties","labels"],{angle:{value:270},align:{value:"right"},baseline:{value:"middle"}}):h.ticks=5),h=a(h,e,t,n,s)}},{"../globals":32,"../util":40,"./time":27}],13:[function(e,t,n){"use strict";function r(e,t,n){n=n||{},e.transform||(e.transform=[]),t.forEach(function(n,r){t.bin(r)&&e.transform.push({type:"bin",field:"data."+n.name,output:"data.bin_"+n.name,maxbins:t.bin(r).maxbins})})}e("../globals"),t.exports=r},{"../globals":32}],14:[function(e,t,n){"use strict";function r(e,t,n){return r.encoding(i.fromSpec(e,n),t)}var a=t.exports=e("datalib/src/stats").summary;e("../globals"),t.exports=r;var i=e("../Encoding"),o=r.axis=e("./axis"),f=r.filter=e("./filter"),s=r.legend=e("./legend"),u=r.marks=e("./marks"),c=r.scale=e("./scale");r.aggregate=e("./aggregate"),r.bin=e("./bin"),r.facet=e("./facet"),r.group=e("./group"),r.layout=e("./layout"),r.sort=e("./sort"),r.stack=e("./stack"),r.style=e("./style"),r.subfacet=e("./subfacet"),r.template=e("./template"),r.time=e("./time"),r.shorthand=function(e,t,n,a){return r.encoding(i.fromShorthand(e,n,a),t)},r.encoding=function(e,t){!t&&e.hasValues()&&(t=a(e.data("values")).reduce(function(e,t){return e[t.field]=t,e},{}));var n=r.layout(e,t),i=r.style(e,t),l=r.template(e,n,t),d=l.marks[0],p=u[e.marktype()],h=u.def(p,e,n,i),m=h[0];f.addFilters(l,e);for(var g=r.sort(l,e,t),b=e.has(ROW),y=e.has(COL),v=0;v<h.length;v++)d.marks.push(h[v]);r.bin(l.data[1],e);var x=u[e.marktype()].line;l=r.time(l,e);var w=r.aggregate(l,e),k=w.details,O=k&&k.length>0,_=O&&r.stack(l,e,m,w.facets);if(O&&(_||x)&&r.subfacet(d,m,k,_,e),x){var T=e.isMeasure(X)&&e.isDimension(Y)?Y:X;m.from||(m.from={}),m.from.transform=[{type:"sort",by:"-"+e.field(T)}]}return b||y?(l=r.facet(d,e,n,i,g,l,m,_,t),l.legends=s.defs(e)):(d.scales=c.defs(c.names(m.properties.update),e,n,t,i,g,{stack:_}),d.axes=o.defs(o.names(m.properties.update),e,n,t),d.legends=s.defs(e)),f.filterLessThanZero(l,e),l}},{"../Encoding":10,"../globals":32,"./aggregate":11,"./axis":12,"./bin":13,"./facet":15,"./filter":16,"./group":17,"./layout":18,"./legend":19,"./marks":20,"./scale":21,"./sort":22,"./stack":23,"./style":24,"./subfacet":25,"./template":26,"./time":27,"datalib/src/stats":7}],15:[function(e,t,n){"use strict";function r(e,t,n,r,s,u,c,l,d){var p,h,m=e.properties.enter,g=[],b=[],y=t.has(ROW),v=t.has(COL);m.fill={value:t.config("cellBackgroundColor")},e.from={data:e.marks[0].from.data};for(var x=0;x<e.marks.length;x++){var w=e.marks[x];w.from.transform?delete w.from.data:delete w.from}y?(t.isDimension(ROW)||a.error("Row encoding should be ordinal."),m.y={scale:ROW,field:"keys."+g.length},m.height={value:n.cellHeight},g.push(t.field(ROW)),v&&(p=a.duplicate(e.from),p.transform=p.transform||[],p.transform.unshift({type:"facet",keys:[t.field(COL)]})),h=o("x-axes",{axes:t.has(X)?i.defs(["x"],t,n,d):void 0,x:v?{scale:COL,field:"keys.0"}:{value:0},width:v&&{value:n.cellWidth},from:p}),u.marks.unshift(h),u.axes=u.axes||[],u.axes.push.apply(u.axes,i.defs(["row"],t,n,d))):t.has(X)&&b.push.apply(b,i.defs(["x"],t,n,d)),v?(t.isDimension(COL)||a.error("Col encoding should be ordinal."),m.x={scale:COL,field:"keys."+g.length},m.width={value:n.cellWidth},g.push(t.field(COL)),y&&(p=a.duplicate(e.from),p.transform=p.transform||[],p.transform.unshift({type:"facet",keys:[t.field(ROW)]})),h=o("y-axes",{axes:t.has(Y)?i.defs(["y"],t,n,d):void 0,y:y&&{scale:ROW,field:"keys.0"},x:y&&{value:0},height:y&&{value:n.cellHeight},from:p}),u.marks.unshift(h),u.axes=u.axes||[],u.axes.push.apply(u.axes,i.defs(["col"],t,n,d))):t.has(Y)&&b.push.apply(b,i.defs(["y"],t,n,d)),u.scales=(u.scales||[]).concat(f.defs(f.names(m).concat(f.names(c.properties.update)),t,n,d,r,s,{stack:l,facet:!0})),b.length>0&&(e.axes=b);var k=e.from.transform||(e.from.transform=[]);return k.unshift({type:"facet",keys:g}),u}e("../globals");var a=e("../util"),i=e("./axis"),o=e("./group").def,f=e("./scale");t.exports=r},{"../globals":32,"../util":40,"./axis":12,"./group":17,"./scale":21}],16:[function(e,t,n){"use strict";e("../globals");var r=t.exports={},a={">":!0,">=":!0,"=":!0,"!=":!0,"<":!0,"<=":!0};r.addFilters=function(e,t){var n=t.filter(),r=e.data[0];r.transform||(r.transform=[]);for(var i in n){var o=n[i],f="",s=o.operator,u=o.operands;if(a[s]){"="===s&&(s="==");var c=u[0],l=u[1];f="d.data."+c+s+l}else if("notNull"===s)for(var d in u)f+="d.data."+u[d]+"!==null",d<u.length-1&&(f+=" && ");else console.warn("Unsupported operator: ",s);r.transform.push({type:"filter",test:f})}},r.filterLessThanZero=function(e,t){t.forEach(function(n,r){"log"===t.scale(r).type&&e.data[1].transform.push({type:"filter",test:"d."+t.field(r)+">0"})})}},{"../globals":32}],17:[function(e,t,n){"use strict";function r(e,t){return t=t||{},{_name:e||void 0,type:"group",from:t.from,properties:{enter:{x:t.x||void 0,y:t.y||void 0,width:t.width||{group:"width"},height:t.height||{group:"height"}}},scales:t.scales||void 0,axes:t.axes||void 0,marks:t.marks||[]}}t.exports={def:r}},{}],18:[function(e,t,n){"use strict";function r(e,t){var n=a(e,t);return n=o(e,t,n)}function a(e,t){var n,r,a=e.has(ROW),i=e.has(COL),o=e.has(X),f=e.has(Y),s=e.marktype(),u=o&&e.isDimension(X)?e.cardinality(X,t):1,c=f&&e.isDimension(Y)?e.cardinality(Y,t):1,l=u>e.config("largeBandMaxCardinality")||c>e.config("largeBandMaxCardinality"),d=e.config("cellPadding");n=o?e.isOrdinalScale(X)?(u+e.band(X).padding)*e.bandSize(X,l):i||a?e.enc(COL).width:e.config("singleWidth"):s===TEXT?e.config("textCellWidth"):e.bandSize(X),r=f?e.isOrdinalScale(Y)?(c+e.band(Y).padding)*e.bandSize(Y,l):i||a?e.enc(ROW).height:e.config("singleHeight"):e.bandSize(Y);var p=n,h=r;if(i){var m=e.cardinality(COL,t);p=n*((1+d)*(m-1)+1)}if(a){var g=e.cardinality(ROW,t);h=r*((1+d)*(g-1)+1)}return{cellWidth:n,cellHeight:r,cellPadding:d,width:p,height:h,x:{useSmallBand:l},y:{useSmallBand:l}}}function i(e,t,n){return e.isType(n,Q)?20:e.isType(n,T)?20:t[e.fieldName(n)].max}function o(e,t,n){return[X,Y].forEach(function(r){var a;e.isDimension(r)||e.isType(r,T)?a=i(e,t,r):"count"===e.aggregate(r)?a=3:e.isType(r,Q)&&(a=r===X?3:Math.min(i(e,t,r),7)),s(n,[r,"axisTitleOffset"],e.config("characterWidth")*a+20)}),n}e("../globals");var f=e("../util"),s=f.setter;t.exports=r},{"../globals":32,"../util":40}],19:[function(e,t,n){"use strict";e("../globals");var r=e("./time"),a=t.exports={};a.defs=function(e){var t=[];if(e.has(COLOR)&&e.legend(COLOR)&&t.push(a.def(COLOR,e,{fill:COLOR,orient:"right"})),e.has(SIZE)&&e.legend(SIZE)&&t.push(a.def(SIZE,e,{size:SIZE,orient:1===t.length?"left":"right"})),e.has(SHAPE)&&e.legend(SHAPE)){if(2===t.length)return console.error("Vega-lite currently only supports two legends"),t;t.push(a.def(SHAPE,e,{shape:SHAPE,orient:1===t.length?"left":"right"}))}return t},a.def=function(e,t,n){var a,i=n;if(i.title=t.fieldTitle(e),t.isType(e,T)&&(a=t.fn(e))&&r.hasScale(a)){var o=i.properties=i.properties||{},f=o.labels=o.labels||{},s=f.text=f.text||{};s.scale="time-"+a}return i}},{"../globals":32,"./time":27}],20:[function(e,t,n){"use strict";function r(e,t,n){var r={};return e.isMeasure(X)?(r.x={scale:X,field:e.field(X)},(!e.has(Y)||e.isDimension(Y))&&(r.x2={value:0})):e.has(X)?r.xc={scale:X,field:e.field(X)}:r.x={value:0,offset:e.config("singleBarOffset")},r.x2||(r.width=!e.has(X)||e.isOrdinalScale(X)?e.has(SIZE)?{scale:SIZE,field:e.field(SIZE)}:{value:e.bandSize(X,t.x.useSmallBand),offset:-1}:{value:2}),e.isMeasure(Y)?(r.y={scale:Y,field:e.field(Y)},r.y2={group:"height"}):(e.has(Y)?r.yc={scale:Y,field:e.field(Y)}:r.y2={group:"height",offset:-e.config("singleBarOffset")},r.height=e.has(SIZE)?{scale:SIZE,field:e.field(SIZE)}:{value:e.bandSize(Y,t.y.useSmallBand),offset:-1}),r.fill=e.has(COLOR)?{scale:COLOR,field:e.field(COLOR)}:{value:e.value(COLOR)},e.has(ALPHA)?r.opacity={scale:ALPHA,field:e.field(ALPHA)}:void 0!==e.value(ALPHA)&&(r.opacity={value:e.value(ALPHA)}),r}function a(e,t,n){var r={};return e.has(X)?r.x={scale:X,field:e.field(X)}:e.has(X)||(r.x={value:e.bandSize(X,t.x.useSmallBand)/2}),e.has(Y)?r.y={scale:Y,field:e.field(Y)}:e.has(Y)||(r.y={value:e.bandSize(Y,t.y.useSmallBand)/2}),e.has(SIZE)?r.size={scale:SIZE,field:e.field(SIZE)}:e.has(SIZE)||(r.size={value:e.value(SIZE)}),e.has(SHAPE)?r.shape={scale:SHAPE,field:e.field(SHAPE)}:e.has(SHAPE)||(r.shape={value:e.value(SHAPE)}),e.has(COLOR)?r.stroke={scale:COLOR,field:e.field(COLOR)}:e.has(COLOR)||(r.stroke={value:e.value(COLOR)}),e.has(ALPHA)?r.opacity={scale:ALPHA,field:e.field(ALPHA)}:void 0!==e.value(ALPHA)?r.opacity={value:e.value(ALPHA)}:e.has(COLOR)||(r.opacity={value:n.opacity}),r.strokeWidth={value:e.config("strokeWidth")},r}function i(e,t,n){var r={};return e.has(X)?r.x={scale:X,field:e.field(X)}:e.has(X)||(r.x={value:0}),e.has(Y)?r.y={scale:Y,field:e.field(Y)}:e.has(Y)||(r.y={group:"height"}),e.has(COLOR)?r.stroke={scale:COLOR,field:e.field(COLOR)}:e.has(COLOR)||(r.stroke={value:e.value(COLOR)}),e.has(ALPHA)?r.opacity={scale:ALPHA,field:e.field(ALPHA)}:void 0!==e.value(ALPHA)&&(r.opacity={value:e.value(ALPHA)}),r.strokeWidth={value:e.config("strokeWidth")},r}function o(e,t,n){var r={};return e.isMeasure(X)?(r.x={scale:X,field:e.field(X)},e.isDimension(Y)&&(r.x2={scale:X,value:0},r.orient={value:"horizontal"})):r.x=e.has(X)?{scale:X,field:e.field(X)}:{value:0},e.isMeasure(Y)?(r.y={scale:Y,field:e.field(Y)},r.y2={scale:Y,value:0}):r.y=e.has(Y)?{scale:Y,field:e.field(Y)}:{group:"height"},e.has(COLOR)?r.fill={scale:COLOR,field:e.field(COLOR)}:e.has(COLOR)||(r.fill={value:e.value(COLOR)}),e.has(ALPHA)?r.opacity={scale:ALPHA,field:e.field(ALPHA)}:void 0!==e.value(ALPHA)&&(r.opacity={value:e.value(ALPHA)}),r}function f(e,t,n){var r={};return e.has(X)?(r.x={scale:X,field:e.field(X)},e.isDimension(X)&&(r.x.offset=-e.bandSize(X,t.x.useSmallBand)/3)):e.has(X)||(r.x={value:0}),e.has(Y)?(r.y={scale:Y,field:e.field(Y)},e.isDimension(Y)&&(r.y.offset=-e.bandSize(Y,t.y.useSmallBand)/3)):e.has(Y)||(r.y={value:0}),r.width=!e.has(X)||e.isDimension(X)?{value:e.bandSize(X,t.y.useSmallBand)/1.5}:{value:1},r.height=!e.has(Y)||e.isDimension(Y)?{value:e.bandSize(Y,t.y.useSmallBand)/1.5}:{value:1},r.fill=e.has(COLOR)?{scale:COLOR,field:e.field(COLOR)}:{value:e.value(COLOR)},e.has(ALPHA)?r.opacity={scale:ALPHA,field:e.field(ALPHA)}:void 0!==e.value(ALPHA)?r.opacity={value:e.value(ALPHA)}:e.has(COLOR)||(r.opacity={value:n.opacity}),r}function s(e){return function(t,n,r){var a={};return t.has(X)?a.x={scale:X,field:t.field(X)}:t.has(X)||(a.x={value:t.bandSize(X,n.x.useSmallBand)/2}),t.has(Y)?a.y={scale:Y,field:t.field(Y)}:t.has(Y)||(a.y={value:t.bandSize(Y,n.y.useSmallBand)/2}),t.has(SIZE)?a.size={scale:SIZE,field:t.field(SIZE)}:t.has(X)||(a.size={value:t.value(SIZE)}),a.shape={value:e},t.has(COLOR)?a.fill={scale:COLOR,field:t.field(COLOR)}:t.has(COLOR)||(a.fill={value:t.value(COLOR)}),t.has(ALPHA)?a.opacity={scale:ALPHA,field:t.field(ALPHA)}:void 0!==t.value(ALPHA)?a.opacity={value:t.value(ALPHA)}:t.has(COLOR)||(a.opacity={value:r.opacity}),a}}function u(e,t,n){var r={};return e.has(X)?r.x={scale:X,field:e.field(X)}:e.has(X)||(r.x=e.has(TEXT)&&e.isType(TEXT,Q)?{value:t.cellWidth-5}:{value:e.bandSize(X,t.x.useSmallBand)/2}),e.has(Y)?r.y={scale:Y,field:e.field(Y)}:e.has(Y)||(r.y={value:e.bandSize(Y,t.y.useSmallBand)/2}),e.has(SIZE)?r.fontSize={scale:SIZE,field:e.field(SIZE)}:e.has(SIZE)||(r.fontSize={value:e.font("size")}),r.fill={value:"black"},r.opacity=e.has(ALPHA)?{scale:ALPHA,field:e.field(ALPHA)}:void 0!==e.value(ALPHA)?{value:e.value(ALPHA)}:{value:n.opacity},e.has(TEXT)?e.isType(TEXT,Q)?(r.text={template:"{{"+e.field(TEXT)+" | number:'.3s'}}"},r.align={value:"right"}):r.text={field:e.field(TEXT)}:r.text={value:"Abc"},r.font={value:e.font("family")},r.fontWeight={value:e.font("weight")},r.fontStyle={value:e.font("style")},r.baseline={value:e.text("baseline")},r}e("../globals");var c=t.exports={};c.def=function(e,t,n,r){var a=[];if(t.marktype()===TEXT&&t.has(COLOR)){var i={x:{value:0},y:{value:0},x2:{value:n.cellWidth},y2:{value:n.cellHeight},fill:{scale:COLOR,field:t.field(COLOR)}};a.push({type:"rect",from:{data:TABLE},properties:{enter:i,update:i}})}var o=e.prop(t,n,r);return a.push({type:e.type,from:{data:TABLE},properties:{enter:o,update:o}}),a},c.bar={type:"rect",stack:!0,prop:r,requiredEncoding:["x","y"],supportedEncoding:{row:1,col:1,x:1,y:1,size:1,color:1,alpha:1}},c.line={type:"line",line:!0,prop:i,requiredEncoding:["x","y"],supportedEncoding:{row:1,col:1,x:1,y:1,color:1,alpha:1,detail:1}},c.area={type:"area",stack:!0,line:!0,requiredEncoding:["x","y"],prop:o,supportedEncoding:{row:1,col:1,x:1,y:1,color:1,alpha:1}},c.tick={type:"rect",prop:f,supportedEncoding:{row:1,col:1,x:1,y:1,color:1,alpha:1,detail:1}},c.circle={type:"symbol",prop:s("circle"),supportedEncoding:{row:1,col:1,x:1,y:1,size:1,color:1,alpha:1,detail:1}},c.square={type:"symbol",prop:s("square"),supportedEncoding:c.circle.supportedEncoding},c.point={type:"symbol",prop:a,supportedEncoding:{row:1,col:1,x:1,y:1,size:1,color:1,alpha:1,shape:1,detail:1}},c.text={type:"text",prop:u,requiredEncoding:["text"],supportedEncoding:{row:1,col:1,size:1,color:1,alpha:1,text:1}}},{"../globals":32}],21:[function(e,t,n){"use strict";function r(e,t,n,r){if(t.isType(e,T)){var a=o.scale.domain(t.fn(e),e);if(a)return a}return e==r.stack?{data:STACKED,field:"data."+(r.facet?"max_":"")+"sum_"+t.field(e,!0)}:{data:n.getDataset(e),field:t.field(e)}}function a(e,t,n,r,a,i){var o=t.scale(e.name);switch(e.name){case X:"ordinal"===e.type?e.bandWidth=t.bandSize(X,n.x.useSmallBand):(e.range=n.cellWidth?[0,n.cellWidth]:"width",e.zero=t.isType(e.name,T)&&"year"===t.fn(e.name)?!1:void 0===o.zero?!0:o.zero,e.reverse=o.reverse),e.round=!0,e.nice="time"===e.type?t.fn(e.name):!0;break;case Y:"ordinal"===e.type?e.bandWidth=t.bandSize(Y,n.y.useSmallBand):(e.range=n.cellHeight?[n.cellHeight,0]:"height",e.zero=t.isType(e.name,T)&&"year"===t.fn(e.name)?!1:void 0===o.zero?!0:o.zero,e.reverse=o.reverse),e.round=!0,e.nice="time"===e.type?t.fn(e.name)||t.config("timeScaleNice"):!0;break;case ROW:e.bandWidth=n.cellHeight,e.round=!0,e.nice=!0;break;case COL:e.bandWidth=n.cellWidth,e.round=!0,e.nice=!0;break;case SIZE:if(t.is("bar"))e.range=[3,Math.max(t.bandSize(X),t.bandSize(Y))];else if(t.is(TEXT))e.range=[8,40];else{var f=Math.min(t.bandSize(X),t.bandSize(Y))-1;e.range=[10,.8*f*f]}e.round=!0,e.zero=!1;break;case SHAPE:e.range="shapes";break;case COLOR:e.range=u.color(e,t,r);break;case ALPHA:e.range=[.2,1];break;default:throw new Error("Unknown encoding name: "+e.name)}switch(e.name){case ROW:case COL:e.padding=t.config("cellPadding"),e.outerPadding=0;break;case X:case Y:"ordinal"===e.type&&(e.points=!0,e.padding=t.band(e.name).padding)}}e("../globals");var i=e("../util"),o=e("./time"),f=e("../lib/colorbrewer/colorbrewer"),s=e("../lib/d3-color/interpolate-lab"),u=t.exports={};u.names=function(e){return i.keys(i.keys(e).reduce(function(t,n){return e[n]&&e[n].scale&&(t[e[n].scale]=1),t},{}))},u.defs=function(e,t,n,i,o,f,s){return s=s||{},e.reduce(function(e,c){var l={name:c,type:u.type(c,t),domain:r(c,t,f,s)};return"ordinal"!==l.type||t.bin(c)||0!==t.sort(c).length||(l.sort=!0),a(l,t,n,i,o,s),e.push(l),e},[])},u.type=function(e,t){switch(t.type(e)){case N:case O:return"ordinal";case T:var n=t.fn(e);return n&&o.scale.type(n,e)||"time";case Q:return t.bin(e)?e===COLOR?"linear":"ordinal":t.scale(e).type}},u.color=function(e,t,n){var r=t.scale(COLOR).range,a=t.cardinality(COLOR,n),i=t.type(COLOR);if(void 0===r){var o=t.config("ordinalPalette");if("ordinal"===e.type)r=i===N?10>=a?"category10-k":"category20":2>=a?[f[o][3][0],f[o][3][2]]:o;else{var s=f[o][9];r=[s[0],s[8]],e.zero=!1}}return u.color.palette(r,a,i)},u.color.palette=function(e,t,n){switch(e){case"category10-k":return["#2ca02c","#e377c2","#7f7f7f","#17becf","#8c564b","#d62728","#bcbd22","#9467bd","#ff7f0e","#1f77b4"];case"category10":return["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];case"category20":return["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];case"category20b":return["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"];case"category20c":return["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]}if(e in f){var r=f[e],a=5;return t in r?r[t]:n===N?r[Math.max.apply(null,i.keys(r))]:u.color.interpolate(r[a][0],r[a][a-1],t)}return e},u.color.interpolate=function(e,t,n){var r=s(e,t);return i.range(n).map(function(e){return r(1*e/(n-1))})}},{"../globals":32,"../lib/colorbrewer/colorbrewer":33,"../lib/d3-color/interpolate-lab":36,"../util":40,"./time":27}],22:[function(e,t,n){"use strict";function r(e,t,n,r){var a={},i=0;return t.forEach(function(r,o){var f=t.sort(o,n);if(f.length>0){var s=f.map(function(e){return{op:e.aggregate,field:"data."+e.name}}),u=f.map(function(e){var t=e.reverse?"-":"";return t+"data."+("count"===e.aggregate?"count":e.aggregate+"_"+e.name)}),c="sorted"+i++,l=[{type:"aggregate",groupby:["data."+r.name],fields:s},{type:"sort",by:u}];e.data.push({name:c,source:RAW,transform:l}),a[o]=c}}),{spec:e,getDataset:function(e){var t=a[e];return t?t:TABLE}}}e("../globals"),t.exports=r},{"../globals":32}],23:[function(e,t,n){"use strict";function r(e,t,n,r){if(!a[t.marktype()].stack)return!1;if(!t.has(COLOR))return!1;var i=null,o=null,f=null,s=t.isMeasure(X),u=t.isMeasure(Y);if(s&&!u)i=Y,o=X,f=0;else{if(!u||s)return null;i=X,o=Y,f=1}var c={name:STACKED,source:TABLE,transform:[{type:"aggregate",groupby:[t.field(i)].concat(r),fields:[{op:"sum",field:t.field(o)}]}]};return r&&r.length>0&&c.transform.push({type:"aggregate",groupby:r,fields:[{op:"max",field:"data.sum_"+t.field(o,!0)}]}),e.data.push(c),n.from.transform=[{type:"stack",point:t.field(i),height:t.field(o),output:{y1:o,y0:o+"2"}}],n.properties.update[o]=n.properties.enter[o]={scale:o,field:o},n.properties.update[o+"2"]=n.properties.enter[o+"2"]={scale:o,field:o+"2"},o}e("../globals");var a=e("./marks");t.exports=r},{"../globals":32,"./marks":20}],24:[function(e,t,n){"use strict";function r(e,t){if(!t)return 1;var n=0;if(e.isAggregate())n=1,e.forEach(function(r,i){i===ROW||i===COL||(i===X||i===Y)&&a.isOrdinalScale(r)||(n*=e.cardinality(i,t))});else{n=t.count;var r=1;e.has(ROW)&&(r*=e.cardinality(ROW,t)),e.has(COL)&&(r*=e.cardinality(COL,t)),n/=r}var i=0;return i=20>n?1:200>n?.7:1e3>n||e.is("tick")?.6:.3}e("../globals");var a=e("../field");t.exports=function(e,t){return{opacity:r(e,t)}}},{"../field":31,"../globals":32}],25:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=e.marks,f=a("subfacet",{marks:o});e.marks=[f],f.from=t.from,delete t.from;var s=f.from.transform||(f.from.transform=[]);s.unshift({type:"facet",keys:n}),r&&i.has(COLOR)&&s.unshift({type:"sort",by:i.field(COLOR)})}e("../globals");var a=e("./group").def;t.exports=r},{"../globals":32,"./group":17}],26:[function(e,t,n){"use strict";function r(e,t,n){var r={name:RAW,format:{}},o={name:TABLE,source:RAW},f=e.data("url"),s=e.data("formatType"),u=e.data("values");return e.hasValues()?r.values=u:(r.url=f,r.format.type=s),e.forEach(function(e,t){var n;e.type==T?(r.format.parse=r.format.parse||{},r.format.parse[e.name]="date"):e.type==Q&&(r.format.parse=r.format.parse||{},n=i.isCount(e)?"count":e.name,r.format.parse[n]="number")}),{width:t.width,height:t.height,padding:"auto",data:[r,o],marks:[a("cell",{width:t.cellWidth?{value:t.cellWidth}:void 0,height:t.cellHeight?{value:t.cellHeight}:void 0})]}}e("../globals");var a=e("./group").def,i=e("../field");t.exports=r},{"../field":31,"../globals":32,"./group":17}],27:[function(e,t,n){"use strict";function r(e,t,n){var a={},i={};t.forEach(function(e,n){e.type===T&&e.fn&&(a[t.field(n)]={field:e,encType:n},i[e.fn]=!0)});var o=e.data[1],f=o.transform=o.transform||[];for(var s in a){var u=a[s];r.transform(f,t,u.encType,u.field)}var c=e.scales=e.scales||[];for(var l in i)r.scale(c,l,t);return e}function a(e,t){return"utc"+e+"(d.data."+t.name+")"}var i=e("../util");t.exports=r,r.cardinality=function(e,t,n,r){var a=e.fn;switch(a){case"seconds":return 60;case"minutes":return 60;case"hours":return 24;case"day":return 7;case"date":return 31;case"month":return 12;case"year":var i=t[e.name],o=t["year_"+e.name];return o?o.distinct-(i.nulls>0&&n[r]?1:0):null}return null},r.formula=function(e){return a(e.fn,e)},r.transform=function(e,t,n,a){e.push({type:"formula",field:t.field(n),expr:r.formula(a)})},r.scale=function(e,t,n){var r=n.config("timeScaleLabelLength");switch(t){case"day":e.push({name:"time-"+t,type:"ordinal",domain:i.range(0,7),range:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(function(e){return e.substr(0,r)})});break;case"month":e.push({name:"time-"+t,type:"ordinal",domain:i.range(0,12),range:["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(e){return e.substr(0,r)})})}},r.isOrdinalFn=function(e){switch(e){case"seconds":case"minutes":case"hours":case"day":case"date":case"month":return!0}return!1},r.scale.type=function(e,t){return t===COLOR?"linear":r.isOrdinalFn(e)||t===COL||t===ROW?"ordinal":"linear"},r.scale.domain=function(e,t){var n=t===COLOR;switch(e){case"seconds":case"minutes":return n?[0,59]:i.range(0,60);case"hours":return n?[0,23]:i.range(0,24);case"day":return n?[0,6]:i.range(0,7);case"date":return n?[1,31]:i.range(1,32);case"month":return n?[0,11]:i.range(0,12)}return null},r.hasScale=function(e){switch(e){case"day":case"month":return!0}return!1}},{"../util":40}],28:[function(e,t,n){"use strict";e("./globals");var r=t.exports={};r.encodingTypes=[X,Y,ROW,COL,SIZE,SHAPE,COLOR,ALPHA,TEXT,DETAIL],r.shorthand={delim:"|",assign:"=",type:",",func:"_"}},{"./globals":32}],29:[function(e,t,n){"use strict";e("./globals");var r=t.exports={};r.types={"boolean":N,number:Q,integer:Q,date:T,string:N}},{"./globals":32}],30:[function(e,t,n){"use strict";var r=e("./consts"),a=r.shorthand,i=e("./field"),o=e("./util"),f=e("./schema/schema"),s=f.encTypes,u=t.exports={};u.countRetinal=function(e){var t=0;return e.color&&t++,e.alpha&&t++,e.size&&t++,e.shape&&t++,t},u.has=function(e,t){var n=e&&e[t];return n&&n.name},u.isAggregate=function(e){for(var t in e)if(u.has(e,t)&&e[t].aggregate)return!0;return!1},u.forEach=function(e,t){var n=0;s.forEach(function(r){u.has(e,r)&&t(e[r],r,n++)})},u.map=function(e,t){var n=[];return s.forEach(function(r){u.has(e,r)&&n.push(t(e[r],r,e))}),n},u.reduce=function(e,t,n){var r=n;return s.forEach(function(n){u.has(e,n)&&(r=t(r,e[n],n,e))}),r},u.fields=function(e){return u.reduce(e,function(e,t){var n=e[t.name]=e[t.name]||[],r=n.containsType=n.containsType||{};return-1===n.indexOf(t)&&(n.push(t),r[t.type]=!0),e},{})},u.shorthand=function(e){return u.map(e,function(e,t){return t+a.assign+i.shorthand(e)}).join(a.delim)},u.fromShorthand=function(e){var t=o.isArray(e)?e:e.split(a.delim);return t.reduce(function(e,t){var n=t.split(a.assign),r=n[0].trim(),o=n[1];return e[r]=i.fromShorthand(o),e},{})}},{"./consts":28,"./field":31,"./schema/schema":38,"./util":40}],31:[function(e,t,n){"use strict";function r(e){return d(e,[N,O])||!!e.bin||l(e,T)&&!!e.fn}e("./globals");var a=e("./consts"),i=a.shorthand,o=e("./compile/time"),f=e("./util"),s=e("./schema/schema"),u=t.exports={};u.shorthand=function(e){var t=a.shorthand;return(e.aggregate?e.aggregate+t.func:"")+(e.fn?e.fn+t.func:"")+(e.bin?"bin"+t.func:"")+(e.name||"")+t.type+e.type},u.shorthands=function(e,t){return t=t||i.delim,e.map(u.shorthand).join(t)},u.fromShorthand=function(e){var t,n=e.split(i.type),r={name:n[0].trim(),type:n[1].trim()};for(t in s.aggregate["enum"]){var a=s.aggregate["enum"][t];if(0===r.name.indexOf(a+"_")){r.name=r.name.substr(a.length+1),"count"==a&&0===r.name.length&&(r.name="*"),r.aggregate=a;break}}for(t in s.timefns){var o=s.timefns[t];if(r.name&&0===r.name.indexOf(o+"_")){r.name=r.name.substr(r.length+1),r.fn=o;break}}return r.name&&0===r.name.indexOf("bin_")&&(r.name=r.name.substr(4),r.bin=!0),r};var c={N:0,O:1,G:2,T:3,Q:4};u.order={},u.order.type=function(e){return"count"===e.aggregate?4:c[e.type]},u.order.typeThenName=function(e){return u.order.type(e)+"_"+e.name.toLowerCase()},u.order.original=function(){return 0},u.order.name=function(e){return e.name},u.order.typeThenCardinality=function(e,t){return t[e.name].distinct};var l=u.isType=function(e,t){return e.type===t},d=u.isTypes=function(e,t){for(var n=0;n<t.length;n++)if(e.type===t[n])return!0;return!1};u.isOrdinalScale=function(e){return d(e,[N,O])||e.bin||l(e,T)&&e.fn&&o.isOrdinalFn(e.fn)},u.isDimension=function(e){return e&&r(e)},u.isMeasure=function(e){return e&&!r(e)},u.role=function(e){return r(e)?"dimension":"measure"},u.count=function(){return{name:"*",aggregate:"count",type:Q,displayName:u.count.displayName}},u.count.displayName="Number of Records",u.isCount=function(e){return"count"===e.aggregate},u.cardinality=function(e,t,n){var r=t[e.name],a=e.type;if(n=n||{},e.bin){var i=f.getbins(r,e.bin.maxbins||s.MAXBINS_DEFAULT);return(i.stop-i.start)/i.step}if(l(e,T)){var u=o.cardinality(e,t,n,a);if(null!==u)return u}return e.aggregate?1:r.distinct-(r.nulls>0&&n[a]?1:0)}},{"./compile/time":27,"./consts":28,"./globals":32,"./schema/schema":38,"./util":40}],32:[function(e,t,n){(function(e){"use strict";var t=e||window;t.TABLE="table",t.RAW="raw",t.STACKED="stacked",t.INDEX="index",t.X="x",t.Y="y",t.ROW="row",t.COL="col",t.SIZE="size",t.SHAPE="shape",t.COLOR="color",t.ALPHA="alpha",t.TEXT="text",t.DETAIL="detail",t.N="N",t.O="O",t.Q="Q",t.T="T"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){t.exports={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],
8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}},{}],34:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}},{}],35:[function(e,t,n){"use strict";function r(){}function a(e,t,n){return this instanceof a?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof a?new a(e.h,e.s,e.l):g(""+e,b,a):new a(e,t,n)}function i(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?i+(o-i)*e/60:180>e?o:240>e?i+(o-i)*(240-e)/60:i}function a(e){return Math.round(255*r(e))}var i,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,i=2*n-o,new p(a(e+120),a(e),a(e-120))}function o(e,t,n){return this instanceof o?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof o?new o(e.h,e.c,e.l):e instanceof s?u(e.l,e.a,e.b):u((e=y((e=w.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new o(e,t,n)}function f(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new s(n,Math.cos(e*=d3_radians)*t,Math.sin(e)*t)}function s(e,t,n){return this instanceof s?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof s?new s(e.l,e.a,e.b):e instanceof o?f(e.h,e.c,e.l):y((e=p(e)).r,e.g,e.b):new s(e,t,n)}function u(e,t,n){return e>0?new o(Math.atan2(n,t)*d3_degrees,Math.sqrt(t*t+n*n),e):new o(0/0,0/0,e)}function c(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function l(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function d(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function p(e,t,n){return this instanceof p?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof p?new p(e.r,e.g,e.b):g(""+e,p,i):new p(e,t,n)}function h(e){return new p(e>>16,e>>8&255,255&e)}function m(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function g(e,t,n){var r,a,i,o=0,f=0,s=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return t(x(a[0]),x(a[1]),x(a[2]))}return(i=M.get(e.toLowerCase()))?t(i.r,i.g,i.b):(null==e||"#"!==e.charAt(0)||isNaN(i=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&i)>>4,o=o>>4|o,f=240&i,f=f>>4|f,s=15&i,s=s<<4|s):7===e.length&&(o=(16711680&i)>>16,f=(65280&i)>>8,s=255&i)),t(o,f,s))}function b(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),f=Math.max(e,t,n),s=f-o,u=(f+o)/2;return s?(i=.5>u?s/(f+o):s/(2-f-o),r=e==f?(t-n)/s+(n>t?6:0):t==f?(n-e)/s+2:(e-t)/s+4,r*=60):(r=0/0,i=u>0&&1>u?0:r),new a(r,i,u)}function y(e,t,n){e=v(e),t=v(t),n=v(n);var r=l((.4124564*e+.3575761*t+.1804375*n)/T),a=l((.2126729*e+.7151522*t+.072175*n)/A),i=l((.0193339*e+.119192*t+.9503041*n)/S);return s(116*a-16,500*(r-a),200*(a-i))}function v(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}var w=t.exports={map:e("./map")};w.color=r,r.prototype.toString=function(){return this.rgb()+""},w.hsl=a;var k=a.prototype=new r;k.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new a(this.h,this.s,this.l/e)},k.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new a(this.h,this.s,e*this.l)},k.rgb=function(){return i(this.h,this.s,this.l)},w.hcl=o;var O=o.prototype=new r;O.brighter=function(e){return new o(this.h,this.c,Math.min(100,this.l+_*(arguments.length?e:1)))},O.darker=function(e){return new o(this.h,this.c,Math.max(0,this.l-_*(arguments.length?e:1)))},O.rgb=function(){return f(this.h,this.c,this.l).rgb()},w.lab=s;var _=18,T=.95047,A=1,S=1.08883,E=s.prototype=new r;E.brighter=function(e){return new s(Math.min(100,this.l+_*(arguments.length?e:1)),this.a,this.b)},E.darker=function(e){return new s(Math.max(0,this.l-_*(arguments.length?e:1)),this.a,this.b)},E.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)},w.lab_rgb=function(e,t,n){var r=(e+16)/116,a=r+t/500,i=r-n/200;return a=c(a)*T,r=c(r)*A,i=c(i)*S,new p(d(3.2404542*a-1.5371385*r-.4985314*i),d(-.969266*a+1.8760108*r+.041556*i),d(.0556434*a-.2040259*r+1.0572252*i))},w.rgb=p;var L=p.prototype=new r;L.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,a=30;return t||n||r?(t&&a>t&&(t=a),n&&a>n&&(n=a),r&&a>r&&(r=a),new p(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new p(a,a,a)},L.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new p(e*this.r,e*this.g,e*this.b)},L.hsl=function(){return b(this.r,this.g,this.b)},L.toString=function(){return"#"+m(this.r)+m(this.g)+m(this.b)};var M=w.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});M.forEach(function(e,t){M.set(e,h(t))})},{"./map":37}],36:[function(e,t,n){"use strict";var r=e("./color");t.exports=function(e,t){e=r.lab(e),t=r.lab(t);var n=e.l,a=e.a,i=e.b,o=t.l-n,f=t.a-a,s=t.b-i;return function(e){return r.lab_rgb(n+o*e,a+f*e,i+s*e)+""}}},{"./color":35}],37:[function(e,t,n){"use strict";function r(){this._=Object.create(null)}function a(e){return(e+="")===d||e[0]===p?p+e:e}function i(e){return(e+="")[0]===p?e.slice(1):e}function o(e){return a(e)in this._}function f(e){return(e=a(e))in this._&&delete this._[e]}function s(){var e=[];for(var t in this._)e.push(i(t));return e}function u(){var e=0;for(var t in this._)++e;return e}function c(){for(var e in this._)return!1;return!0}var l=e("./class");t.exports=function(e,t){var n=new r;if(e instanceof r)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var a,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,a=e[i],i),a)}else for(var f in e)n.set(f,e[f]);return n};var d="__proto__",p="\x00";l(r,{has:o,get:function(e){return this._[a(e)]},set:function(e,t){return this._[a(e)]=t},remove:f,keys:s,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:i(t),value:this._[t]});return e},size:u,empty:c,forEach:function(e){for(var t in this._)e.call(this,i(t),this._[t])}})},{"./class":34}],38:[function(e,t,n){"use strict";e("../globals");var r=t.exports={},a=e("../util"),i=a.toMap,o=e("../lib/colorbrewer/colorbrewer");r.util=e("./schemautil"),r.marktype={type:"string","enum":["point","tick","bar","line","area","circle","square","text"]},r.aggregate={type:"string","enum":["avg","sum","median","min","max","count"],supportedEnums:{Q:["avg","median","sum","min","max","count"],O:["median","min","max"],N:[],T:["avg","median","min","max"],"":["count"]},supportedTypes:i([Q,N,O,T,""])},r.band={type:"object",properties:{size:{type:"integer",minimum:0},padding:{type:"integer",minimum:0,"default":1}}},r.getSupportedRole=function(e){return r.schema.properties.encoding.properties[e].supportedRole},r.timefns=["year","month","day","date","hours","minutes","seconds"],r.defaultTimeFn="month",r.fn={type:"string","enum":r.timefns,supportedTypes:i([T])},r.scale_type={type:"string","enum":["linear","log","pow","sqrt","quantile"],"default":"linear",supportedTypes:i([Q])},r.field={type:"object",properties:{name:{type:"string"}}};var f=a.duplicate,s=r.util.merge;r.MAXBINS_DEFAULT=15;var u={type:["boolean","object"],"default":!1,properties:{maxbins:{type:"integer","default":r.MAXBINS_DEFAULT,minimum:2}},supportedTypes:i([Q])},c=s(f(r.field),{type:"object",properties:{type:{type:"string","enum":[N,O,Q,T]},aggregate:r.aggregate,fn:r.fn,bin:u,scale:{type:"object",properties:{type:r.scale_type,reverse:{type:"boolean","default":!1,supportedTypes:i([Q,T])},zero:{type:"boolean",description:"Include zero","default":!0,supportedTypes:i([Q,T])},nice:{type:"string","enum":["second","minute","hour","day","week","month","year"],supportedTypes:i([T])}}}}}),l=s(f(r.field),{type:"object",supportedRole:{dimension:!0},properties:{type:{type:"string","enum":[N,O,Q,T]},fn:r.fn,bin:u,aggregate:{type:"string","enum":["count"],supportedTypes:i([N,O])}}}),d={type:"object",supportedMarktypes:{point:!0,tick:!0,bar:!0,line:!0,area:!0,circle:!0,square:!0},properties:{axis:{type:"object",properties:{grid:{type:"boolean","default":!0,description:"A flag indicate if gridlines should be created in addition to ticks."},title:{type:"boolean","default":!0,description:"A title for the axis."},titleOffset:{type:"integer","default":void 0,description:"A title offset value for the axis."},format:{type:"string","default":void 0,description:"The formatting pattern for axis labels."},maxLabelLength:{type:"integer","default":25,minimum:0,description:"Truncate labels that are too long."}}}}},p={type:"object",properties:{sort:{type:"array","default":[],items:{type:"object",supportedTypes:i([N,O]),required:["name","aggregate"],name:{type:"string"},aggregate:{type:"string","enum":["avg","sum","min","max","count"]},reverse:{type:"boolean","default":!1}}}}},h={type:"object",properties:{band:r.band}},m={type:"object",properties:{legend:{type:"boolean","default":!0}}},g={type:"object",supportedMarktypes:{text:!0},properties:{text:{type:"object",properties:{align:{type:"string","default":"left"},baseline:{type:"string","default":"middle"},margin:{type:"integer","default":4,minimum:0}}},font:{type:"object",properties:{weight:{type:"string","enum":["normal","bold"],"default":"normal"},size:{type:"integer","default":10,minimum:0},family:{type:"string","default":"Helvetica Neue"},style:{type:"string","default":"normal","enum":["normal","italic"]}}}}},b={type:"object",supportedMarktypes:{point:!0,bar:!0,circle:!0,square:!0,text:!0},properties:{value:{type:"integer","default":30,minimum:0}}},y={type:"object",supportedMarktypes:{point:!0,tick:!0,bar:!0,line:!0,area:!0,circle:!0,square:!0,text:!0},properties:{value:{type:"string",role:"color","default":"steelblue"},scale:{type:"object",properties:{range:{type:["string","array"]}}}}},v={type:"object",supportedMarktypes:{point:!0,tick:!0,bar:!0,line:!0,area:!0,circle:!0,square:!0,text:!0},properties:{value:{type:"number","default":void 0,minimum:0,maximum:1}}},x={type:"object",supportedMarktypes:{point:!0,circle:!0,square:!0},properties:{value:{type:"string","enum":["circle","square","cross","diamond","triangle-up","triangle-down"],"default":"circle"}}},w={type:"object",supportedMarktypes:{point:!0,tick:!0,line:!0,circle:!0,square:!0}},k={properties:{height:{type:"number",minimum:0,"default":150},grid:{type:"boolean","default":!0,description:"A flag indicate if gridlines should be created in addition to ticks."}}},_={properties:{width:{type:"number",minimum:0,"default":150},axis:{properties:{maxLabelLength:{type:"integer","default":12,minimum:0,description:"Truncate labels that are too long."}}}}},A={type:"object",supportedMarktypes:{point:!0,tick:!0,bar:!0,line:!0,area:!0,circle:!0,square:!0,text:!0},properties:{padding:{type:"number",minimum:0,maximum:1,"default":.1}}},S={required:["name","type"]},E=s(f(c),{supportedRole:{measure:!0,dimension:!0}}),L=s(f(c),{supportedRole:{measure:!0,dimension:"ordinal-only"}}),M=s(f(c),{supportedRole:{measure:!0}}),C=s(f(E),d,h,S,p),D=f(C),R=s(f(l),S,A,p),q=s(f(R),d,k),j=s(f(R),d,_),Y=s(f(L),m,b,p),$=s(f(E),m,y,p),P=s(f(L),v,p),X=s(f(l),m,x,p),z=s(f(l),w,p),H=s(f(M),g,p),W={type:"array",items:{type:"object",properties:{operands:{type:"array",items:{type:["string","boolean","integer","number"]}},operator:{type:"string","enum":[">",">=","=","!=","<","<=","notNull"]}}}},F={type:"object",properties:{formatType:{type:"string","enum":["json","csv"],"default":"json"},url:{type:"string","default":void 0},values:{type:"array",description:"Pass array of objects instead of a url to a file.",items:{type:"object",additionalProperties:!0}}}},B={type:"object",properties:{width:{type:"integer","default":void 0},height:{type:"integer","default":void 0},viewport:{type:"array",items:{type:"integer"},"default":void 0},gridColor:{type:"string",role:"color","default":"black"},gridOpacity:{type:"number",minimum:0,maximum:1,"default":.08},filterNull:{type:"object",properties:{O:{type:"boolean","default":!1},Q:{type:"boolean","default":!0},T:{type:"boolean","default":!0}}},toggleSort:{type:"string","default":O},singleHeight:{type:"integer","default":200,minimum:0},singleWidth:{type:"integer","default":200,minimum:0},largeBandSize:{type:"integer","default":21,minimum:0},smallBandSize:{type:"integer","default":12,minimum:0},largeBandMaxCardinality:{type:"integer","default":10},cellPadding:{type:"number","default":.1},cellGridColor:{type:"string",role:"color","default":"black"},cellGridOpacity:{type:"number",minimum:0,maximum:1,"default":.15},cellBackgroundColor:{type:"string",role:"color","default":"transparent"},textCellWidth:{type:"integer","default":90,minimum:0},strokeWidth:{type:"integer","default":2,minimum:0},singleBarOffset:{type:"integer","default":5,minimum:0},c10palette:{type:"string","default":"category10-k","enum":["category10","category10-k","Pastel1","Pastel2","Set1","Set2","Set3"]},c20palette:{type:"string","default":"category20","enum":["category20","category20b","category20c"]},ordinalPalette:{type:"string","default":"BuGn","enum":a.keys(o)},timeScaleLabelLength:{type:"integer","default":3,minimum:0},characterWidth:{type:"integer","default":6}}};r.schema={$schema:"http://json-schema.org/draft-04/schema#",description:"Schema for Vega-lite specification",type:"object",required:["marktype","encoding","data"],properties:{data:F,marktype:r.marktype,encoding:{type:"object",properties:{x:C,y:D,row:q,col:j,size:Y,color:$,alpha:P,shape:X,text:H,detail:z}},filter:W,config:B}},r.encTypes=a.keys(r.schema.properties.encoding.properties),r.instantiate=function(){return r.util.instantiate(r.schema)}},{"../globals":32,"../lib/colorbrewer/colorbrewer":33,"../util":40,"./schemautil":39}],39:[function(e,t,n){"use strict";function r(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=r(t[n].constructor===Array?[]:{},t[n]):r(e[n],t[n]));return e}var a=t.exports={},i=e("../util"),o=function(e){return 0===Object.keys(e).length};a.extend=function(e,t){return a.merge(a.instantiate(t),e)},a.instantiate=function(e){var t;if(void 0===e)return void 0;if("default"in e)return t=e["default"],i.isObject(t)?i.duplicate(t):t;if("object"===e.type){var n={};for(var r in e.properties)t=a.instantiate(e.properties[r]),void 0!==t&&(n[r]=t);return n}return"array"===e.type?[]:void 0},a.subtract=function(e,t){var n={};for(var r in e){var f=t[r],s=e[r];if(!t||f!==s)if("object"==typeof s&&!i.isArray(s)&&f){var u=a.subtract(s,f);o(u)||(n[r]=u)}else(!i.isArray(s)||s.length>0)&&(n[r]=s)}return n},a.merge=function(){for(var e=arguments[0],t=1;t<arguments.length;t++)e=r(e,arguments[t]);return e}},{"../util":40}],40:[function(e,t,n){"use strict";var r=t.exports=e("datalib/src/util");r.extend(r,e("datalib/src/generate")),r.bin=e("datalib/src/bins/bins"),r.isin=function(e,t){return-1!==t.indexOf(e)},r.forEach=function(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)t.call(n,e[r],r,e)},r.reduce=function(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var a in e)n=t.call(r,n,e[a],a,e);return n},r.map=function(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var a in e)r.push(t.call(n,e[a],a,e))},r.any=function(e,t){var n,r=0;for(n in e)if(t(e[n],n,r++))return!0;return!1},r.all=function(e,t){var n,r=0;for(n in e)if(!t(e[n],n,r++))return!1;return!0},r.getbins=function(e,t){return r.bin({min:e.min,max:e.max,maxbins:t})},r.setter=function(e,t,n,r){for(var a=0;a<t.length-1;++a)e=r||t[a]in e?e[t[a]]:e[t[a]]={};e[t[a]]=n},r.getter=function(e,t,n){for(var r=0;r<t.length;++r)e=n||t[r]in e?e[t[r]]:e[t[r]]={};return e},r.error=function(e){console.error("[VL Error]",e)}},{"datalib/src/bins/bins":4,"datalib/src/generate":5,"datalib/src/util":9}]},{},[1])(1)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.cp=e()}}(function(){return function e(t,n,r){function a(o,f){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!f&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return a(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){t.exports={consts:e("./consts"),cluster:e("./cluster/cluster"),gen:e("./gen/gen"),rank:e("./rank/rank"),util:e("./util"),auto:"-, sum"}},{"./cluster/cluster":7,"./consts":10,"./gen/gen":14,"./rank/rank":18,"./util":20}],2:[function(e,t,n){t.exports={hcluster:e("./hcluster"),Kmeans:e("./kmeans"),kmeans:e("./kmeans").kmeans}},{"./hcluster":4,"./kmeans":5}],3:[function(e,t,n){t.exports={
euclidean:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)},manhattan:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.abs(t[r]-e[r]);return n},max:function(e,t){for(var n=0,r=0;r<e.length;r++)n=Math.max(n,Math.abs(t[r]-e[r]));return n}}},{}],4:[function(e,t,n){var r=e("./distance"),a=function(e,t,n){this.distance=e,this.linkage=t,this.threshold=void 0==n?1/0:n};a.prototype={cluster:function(e,t,n){this.clusters=[],this.dists=[],this.mins=[],this.index=[];for(var r=0;r<e.length;r++){var a={value:e[r],key:r,index:r,size:1};this.clusters[r]=a,this.index[r]=a,this.dists[r]=[],this.mins[r]=0}for(var r=0;r<this.clusters.length;r++)for(var i=0;r>=i;i++){var o=r==i?1/0:this.distance(this.clusters[r].value,this.clusters[i].value);this.dists[r][i]=o,this.dists[i][r]=o,o<this.dists[r][this.mins[r]]&&(this.mins[r]=i)}for(var f=this.mergeClosest(),r=0;f;)n&&r++%t==0&&n(this.clusters),f=this.mergeClosest();return this.clusters.forEach(function(e){delete e.key,delete e.index}),this.clusters},mergeClosest:function(){for(var e=0,t=1/0,n=0;n<this.clusters.length;n++){var r=this.clusters[n].key,a=this.dists[r][this.mins[r]];t>a&&(e=r,t=a)}if(t>=this.threshold)return!1;var i=this.index[e],o=this.index[this.mins[e]],f={left:i,right:o,key:i.key,size:i.size+o.size};this.clusters[i.index]=f,this.clusters.splice(o.index,1),this.index[i.key]=f;for(var n=0;n<this.clusters.length;n++){var a,s=this.clusters[n];i.key==s.key?a=1/0:"single"==this.linkage?(a=this.dists[i.key][s.key],this.dists[i.key][s.key]>this.dists[o.key][s.key]&&(a=this.dists[o.key][s.key])):"complete"==this.linkage?(a=this.dists[i.key][s.key],this.dists[i.key][s.key]<this.dists[o.key][s.key]&&(a=this.dists[o.key][s.key])):a="average"==this.linkage?(this.dists[i.key][s.key]*i.size+this.dists[o.key][s.key]*o.size)/(i.size+o.size):this.distance(s.value,i.value),this.dists[i.key][s.key]=this.dists[s.key][i.key]=a}for(var n=0;n<this.clusters.length;n++){var u=this.clusters[n].key;if(this.mins[u]==i.key||this.mins[u]==o.key){for(var t=u,c=0;c<this.clusters.length;c++){var l=this.clusters[c].key;this.dists[u][l]<this.dists[u][t]&&(t=l)}this.mins[u]=t}this.clusters[n].index=n}return delete i.key,delete o.key,delete i.index,delete o.index,!0}};var i=function(e,t,n,i,o,f){t=t||"euclidean",n=n||"average","string"==typeof t&&(t=r[t]);var s=new a(t,n,i).cluster(e,o,f);return void 0===i?s[0]:s};t.exports=i},{"./distance":3}],5:[function(e,t,n){function r(e){this.centroids=e||[]}var a=e("./distance");r.prototype.randomCentroids=function(e,t){var n=e.slice(0);return n.sort(function(){return Math.round(Math.random())-.5}),n.slice(0,t)},r.prototype.classify=function(e,t){var n=1/0,r=0;t=t||"euclidean","string"==typeof t&&(t=a[t]);for(var i=0;i<this.centroids.length;i++){var o=t(e,this.centroids[i]);n>o&&(n=o,r=i)}return r},r.prototype.cluster=function(e,t,n,r,i){t=t||Math.max(2,Math.ceil(Math.sqrt(e.length/2))),n=n||"euclidean","string"==typeof n&&(n=a[n]),this.centroids=this.randomCentroids(e,t);for(var o=new Array(e.length),f=new Array(t),s=0,u=!0;u;){for(var c=0;c<e.length;c++)o[c]=this.classify(e[c],n);u=!1;for(var l=0;t>l;l++){for(var d=[],c=0;c<o.length;c++)o[c]==l&&d.push(e[c]);if(d.length){for(var p=this.centroids[l],h=new Array(p.length),m=0;m<p.length;m++){for(var g=0,c=0;c<d.length;c++)g+=d[c][m];h[m]=g/d.length,h[m]!=p[m]&&(u=!0)}this.centroids[l]=h,f[l]=d}}i&&s++%r==0&&i(f)}return f},r.prototype.toJSON=function(){return JSON.stringify(this.centroids)},r.prototype.fromJSON=function(e){return this.centroids=JSON.parse(e),this},t.exports=r,t.exports.kmeans=function(e,t){return(new r).cluster(e,t)}},{"./distance":3}],6:[function(e,t,n){(function(e){"use strict";var t=e||window;t.TABLE="table",t.RAW="raw",t.STACKED="stacked",t.INDEX="index",t.X="x",t.Y="y",t.ROW="row",t.COL="col",t.SIZE="size",t.SHAPE="shape",t.COLOR="color",t.ALPHA="alpha",t.TEXT="text",t.DETAIL="detail",t.N="N",t.O="O",t.Q="Q",t.T="T"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){(function(n){"use strict";function r(e,t){var n=r.distance.table(e),s=i.hcluster(e,function(e,t){var r=a.Encoding.shorthand(e),i=a.Encoding.shorthand(t);return n[r][i]},"average",o.CLUSTER_THRESHOLD),u=s.map(function(e){return f.traverse(e,[])}).map(function(e){return e.sort(function(e,t){return t.score-e.score})}).filter(function(e){return e.length>0}).sort(function(e,t){return t[0].score-e[0].score});return u.dist=n,u}t.exports=r;var a="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,i=e("clusterfck"),o=e("./clusterconsts"),f=e("../util");r.distance=e("./distance")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":20,"./clusterconsts":8,"./distance":9,clusterfck:2}],8:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],a=t[2];return e[n]=e[n]||{},e[r]=e[r]||{},e[n][r]=e[r][n]=a,e}var a=t.exports={};a.SWAPPABLE=.05,a.DIST_MISSING=1,a.CLUSTER_THRESHOLD=1,a.DIST_BY_ENCTYPE=[["x","y",a.SWAPPABLE],["row","col",a.SWAPPABLE],["color","shape",a.SWAPPABLE],["color","detail",a.SWAPPABLE],["detail","shape",a.SWAPPABLE],["color","alpha",a.SWAPPABLE],["size","alpha",a.SWAPPABLE],["size","color",a.SWAPPABLE]].reduce(r,{})},{}],9:[function(e,t,n){(function(n){"use strict";var r="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,a=e("./clusterconsts"),i=e("../util"),o={};t.exports=o,o.table=function(e){var t,n,a=e.length,i=e.map(function(e){return o.getEncTypeByColumnName(e)}),f=e.map(r.Encoding.shorthand),s={};for(t=0;a>t;t++)s[f[t]]={};for(t=0;a>t;t++)for(n=t+1;a>n;n++){var u=f[n],c=f[t];s[u][c]=s[c][u]=o.get(i[t],i[n])}return s},o.get=function(e,t){var n=i.union(r.keys(e.col),r.keys(t.col)),o=0;n.forEach(function(n){var r=e.col[n],i=t.col[n];r&&i?r.encType!=i.encType&&(o+=(a.DIST_BY_ENCTYPE[r.encType]||{})[i.encType]||1):o+=a.DIST_MISSING});var f=r.Encoding.isStack(e),s=r.Encoding.isStack(t);return(f||s)&&(f&&s?e.encoding.color.name!==t.encoding.color.name&&(o+=1):o+=1),o},o.getEncTypeByColumnName=function(e){var t={},n=e.encoding;return r.keys(n).forEach(function(e){var a=r.duplicate(n[e]);a.encType=e,t[a.name||""]=a,delete a.name}),{marktype:e.marktype,col:t,encoding:e.encoding}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":20,"./clusterconsts":8}],10:[function(e,t,n){"use strict";var r=t.exports={gen:{},cluster:{},rank:{}};r.gen.projections={type:"object",properties:{omitDotPlot:{type:"boolean","default":!1,description:"remove all dot plots"},maxCardinalityForAutoAddOrdinal:{type:"integer","default":50,description:"max cardinality for ordinal field to be considered for auto adding"},alwaysAddHistogram:{type:"boolean","default":!0}}},r.gen.aggregates={type:"object",properties:{config:{type:"object"},data:{type:"object"},tableTypes:{type:"boolean","default":"both","enum":["both","aggregated","disaggregated"]},genDimQ:{type:"string","default":"auto","enum":["auto","bin","cast","none"],description:"Use Q as Dimension either by binning or casting"},minCardinalityForBin:{type:"integer","default":20,description:"minimum cardinality of a field if we were to bin"},omitDotPlot:{type:"boolean","default":!1,description:"remove all dot plots"},omitMeasureOnly:{type:"boolean","default":!1,description:"Omit aggregation with measure(s) only"},omitDimensionOnly:{type:"boolean","default":!0,description:"Omit aggregation with dimension(s) only"},addCountForDimensionOnly:{type:"boolean","default":!0,description:"Add count when there are dimension(s) only"},aggrList:{type:"array",items:{type:["string"]},"default":[void 0,"avg"]},timeFnList:{type:"array",items:{type:["string"]},"default":["year"]},consistentAutoQ:{type:"boolean","default":!0,description:"generate similar auto transform for quant"}}},r.gen.encodings={type:"object",properties:{marktypeList:{type:"array",items:{type:"string"},"default":["point","bar","line","area","text","tick"],description:"allowed marktypes"},encodingTypeList:{type:"array",items:{type:"string"},"default":["x","y","row","col","size","color","text","detail"],description:"allowed encoding types"},maxGoodCardinalityForFacets:{type:"integer","default":5,description:"maximum cardinality of a field to be put on facet (row/col) effectively"},maxCardinalityForFacets:{type:"integer","default":20,description:"maximum cardinality of a field to be put on facet (row/col)"},maxGoodCardinalityForColor:{type:"integer","default":7,description:"maximum cardinality of an ordinal field to be put on color effectively"},maxCardinalityForColor:{type:"integer","default":20,description:"maximum cardinality of an ordinal field to be put on color"},maxCardinalityForShape:{type:"integer","default":6,description:"maximum cardinality of an ordinal field to be put on shape"},omitTranpose:{type:"boolean","default":!0,description:"Eliminate all transpose by (1) keeping horizontal dot plot only (2) for OxQ charts, always put O on Y (3) show only one DxD, MxM (currently sorted by name)"},omitDotPlot:{type:"boolean","default":!1,description:"remove all dot plots"},omitDotPlotWithExtraEncoding:{type:"boolean","default":!0,description:"remove all dot plots with >1 encoding"},omitMultipleRetinalEncodings:{type:"boolean","default":!0,description:"omit using multiple retinal variables (size, color, alpha, shape)"},omitNonTextAggrWithAllDimsOnFacets:{type:"boolean","default":!0,description:"remove all aggregated charts (except text tables) with all dims on facets (row, col)"},omitSizeOnBar:{type:"boolean","default":!1,description:"do not use bar's size"},omitStackedAverage:{type:"boolean","default":!0,description:"do not stack bar chart with average"},alwaysGenerateTableAsHeatmap:{type:"boolean","default":!0}}}},{}],11:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){function f(t){t=a.duplicate(t),t.key=a.field.shorthands(t),e.push(t)}function s(){if(r.omitMeasureOnly||r.omitDimensionOnly){var e=!1,t=!1,n=!1;if(m.forEach(function(r){a.field.isDimension(r)?t=!0:(e=!0,r.aggregate||(n=!0))}),!t&&!n&&r.omitMeasureOnly)return;if(!e&&(r.addCountForDimensionOnly&&(m.push(a.field.count()),f(m),m.pop()),r.omitDimensionOnly))return}r.omitDotPlot&&1===m.length||f(m)}function u(e,t,n,r){var a=t===!0||null===t,i=t===!1||null===t;r?a&&(m[e].aggregate=r,h(e+1,!0,n),delete m[e].aggregate):i&&h(e+1,!1,n)}function c(e,t,n){m[e].bin=!0,h(e+1,t,n),delete m[e].bin}function l(e,i,f){var s=t[e],l=i===!0||null===i;if(m[e]={name:s.name,type:s.type},"count"===s.aggregate)l&&(m[e].aggregate=s.aggregate,h(e+1,!0,f));else if(s._aggregate)u(e,i,f,s._aggregate);else if(s._raw)u(e,i,f,void 0);else if(s._bin)c(e,i,f);else if(r.aggrList.forEach(function(t){r.consistentAutoQ&&f!==o&&f!==t||u(e,i,t,t)}),(!r.consistentAutoQ||a.isin(f,[o,"bin","cast","autocast"]))&&!g){var d=a.field.cardinality(s,n)>r.minCardinalityForBin,p="auto"===r.genDimQ,b="bin"===r.genDimQ||p&&d,y="cast"===r.genDimQ||p&&!d;b&&a.isin(f,[o,"bin","autocast"])&&c(e,i,p?"autocast":"bin"),y&&a.isin(f,[o,"cast","autocast"])&&(m[e].type="O",h(e+1,i,p?"autocast":"cast"),m[e].type="Q")}}function d(e,t,n,r){m[e].fn=r,h(e+1,t,n),delete m[e].fn}function p(e,n,a){var i=t[e];m[e]={name:i.name,type:i.type},i._fn?d(e,n,a,i._fn):r.timeFnList.forEach(function(t){void 0===t?n||h(e+1,!1,a):d(e,n,a,t)})}function h(e,n,r){if(e===t.length)return void s();var a=t[e];switch(a.type){case Q:l(e,n,r);break;case T:p(e,n,r);break;case O:case N:default:m[e]=a,h(e+1,n,r)}}r=a.schema.util.extend(r||{},i.gen.aggregates);var m=new Array(t.length),g=a.any(t,function(e){return a.field.isTypes(e,[N,O])}),b="aggregated"===r.tableTypes?!0:"disaggregated"===r.tableTypes?!1:null;return h(0,b,o),e}var a="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,i=e("../consts"),o="*";t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":10}],12:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r,i){r=o.schema.util.extend(r||{},c.gen.encodings);var s=f([],t,n,r);return i?s.reduce(function(e,t){return e[t]=a([],t,n,r),e},{}):s.reduce(function(e,t){return a(e,t,n,r)},[])}function a(e,t,n,r){return s(t,n,r).forEach(function(a){var f=o.duplicate({data:r.data,marktype:a,encoding:t,config:r.config}),s=i(f,n,r),c=u.encoding(s,n,r);s.score=c.score,s.scoreFeatures=c.features,e.push(s)}),e}function i(e,t,n){"text"===e.marktype&&n.alwaysGenerateTableAsHeatmap&&(e.encoding.color=e.encoding.text);var r=e.encoding;return["x","y"].forEach(function(e){var n=r[e];if(n&&o.field.isMeasure(n)&&!o.field.isCount(n)){var a=t[n.name];a&&a.stdev/a.avg<.01&&(n.scale={zero:!1})}}),e}var o="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,f=e("./encs"),s=e("./marktypes"),u=e("../rank/rank"),c=e("../consts");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":10,"../rank/rank":18,"./encs":13,"./marktypes":15}],13:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){return r.omitMultipleRetinalEncodings&&(e.color||e.size||e.shape||e.alpha)?!1:!0}function a(e,t,n,a){return r(e,t,n,a)?u.field.isMeasure(t)||u.field.cardinality(t,n)<=a.maxCardinalityForColor:!1}function i(e,t,n,a){return r(e,t,n,a)?t.bin&&t.type===Q?!1:t.fn&&t.type===T?!1:u.field.cardinality(t,n)<=a.maxCardinalityForColor:!1}function o(e){return u.field.isTypes(e.y,[N,O])&&p(e.x)?!0:p(e.y)&&!u.field.isTypes(e.x,[N,O])&&d(e.x)?!0:!1}function f(e,t,n){if(e.text)return l.satisfyRules(e,TEXT,t,n);if(e.x||e.y||e.geo||e.arc){if(e.row||e.col){if(!e.x||!e.y)return!1;if(n.omitNonTextAggrWithAllDimsOnFacets&&s.isAggrWithAllDimOnFacets(e))return!1}if(e.x&&e.y){var r=!!d(e.x),a=!!d(e.y);if(r&&a&&!u.enc.isAggregate(e))return!1;if(n.omitTranpose)if(r^a){if(!o(e))return!1}else if(e.y.type===T||e.x.type===T){if(e.y.type===T&&e.x.type!==T)return!1}else if(e.x.name>e.y.name)return!1;return!0}return n.omitDotPlot?!1:n.omitTranpose&&e.y?!1:n.omitDotPlotWithExtraEncoding&&u.keys(e).length>1?!1:e.x&&"count"==e.x.aggregate&&!e.y?!1:e.y&&"count"==e.y.aggregate&&!e.x?!1:!0}return!1}function s(e,t,n,r){function a(o){if(o===t.length)return void(f(i,n,r)&&e.push(u.duplicate(i)));var s=t[o];for(var c in r.encodingTypeList){var l=r.encodingTypeList[c],p=d(s);l in i||!(p&&h[l].dimension||!p&&h[l].measure)||h[l].rules&&!h[l].rules(i,s,n,r)||(i[l]=s,a(o+1),delete i[l])}}r=u.schema.util.extend(r||{},c.gen.encodings);var i={};return a(0),e}e("../globals");var u="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,c=e("../consts"),l=e("./marktypes"),d=u.field.isDimension,p=u.field.isMeasure;t.exports=s;var h={x:{dimension:!0,measure:!0,multiple:!0},y:{dimension:!0,measure:!0,multiple:!0},row:{dimension:!0,multiple:!0},col:{dimension:!0,multiple:!0},shape:{dimension:!0,rules:i},size:{measure:!0,rules:r},color:{dimension:!0,measure:!0,rules:a},alpha:{measure:!0,rules:r},text:{measure:!0},detail:{dimension:!0}};s.isAggrWithAllDimOnFacets=function(e){var t=!1,n=!1;for(var r in e){var a=e[r];if(a.aggregate&&(t=!0),u.field.isDimension(a)&&r!==ROW&&r!==COL&&(n=!0),t&&n)break}return t&&!n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":10,"../globals":17,"./marktypes":15}],14:[function(e,t,n){"use strict";var r=e("../util"),a=t.exports={aggregates:e("./aggregates"),projections:e("./projections"),encodings:e("./encodings"),encs:e("./encs"),marktypes:e("./marktypes")};a.charts=function(e,t,n,i){t=r.gen.getOpt(t),i=void 0===i?{encodings:1}:i;var o,f,s=t.genAggr?a.aggregates([],e,t):[e],u=0;return i===!0||i&&i.aggregate?o=s.reduce(function(e,n){return a.encs(e,n,t)},[]):(o=s.map(function(e){return a.encs([],e,t)},!0),u+=1),i===!0||i&&i.encodings?f=r.nestedReduce(o,function(e,r){return a.marktypes(e,r,t,n)},u,!0):(f=r.nestedMap(o,function(e){return a.marktypes([],e,t,n)},u,!0),u+=1),f}},{"../util":20,"./aggregates":11,"./encodings":12,"./encs":13,"./marktypes":15,"./projections":16}],15:[function(e,t,n){(function(n){"use strict";function r(e,t,n){n=d.schema.util.extend(n||{},p.gen.encodings);var r=n.marktypeList.filter(function(r){return g.satisfyRules(e,r,t,n)});return r}function a(e,t,n){return d.field.cardinality(e,t)<=n.maxCardinalityForFacets}function i(e,t,n){return e.row&&!a(e.row,t,n)?!1:e.col&&!a(e.col,t,n)?!1:!0}function o(e,t,n){if(!i(e,t,n))return!1;if(e.x&&e.y){var r=h(e.x),a=h(e.y);if(r&&a){if(e.shape)return!1;if(e.color&&h(e.color))return!1}}else{if(n.omitDotPlot)return!1;if(n.omitTranpose&&e.y)return!1;if(n.omitDotPlotWithExtraEncoding&&d.keys(e).length>1)return!1;if(e.shape)return!1}return!0}function f(e,t,n){if(e.x||e.y){if(d.enc.isAggregate(e))return!1;var r=h(e.x),a=h(e.y);return!r&&(!e.y||m(e.y))||!a&&(!e.x||m(e.x))}return!1}function s(e,t,n){if(!i(e,t,n))return!1;if(n.omitSizeOnBar&&void 0!==e.size)return!1;if(void 0!==e.x.aggregate^void 0!==e.y.aggregate&&h(e.x)^h(e.y)){var r=e.x.aggregate||e.y.aggregate;return!(n.omitStackedAverage&&"avg"===r&&e.color)}return!1}function u(e,t,n){return i(e,t,n)?"T"==e.x.type&&e.x.fn&&"Q"==e.y.type&&e.y.aggregate:!1}function c(e,t,n){return i(e,t,n)&&u(e,t,n)?!(n.omitStackedAverage&&"avg"===e.y.aggregate&&e.color):!1}function l(e,t,n){return!(!e.row&&!e.col||!e.text||!e.text.aggregate||e.x||e.y||e.size||n.alwaysGenerateTableAsHeatmap&&e.color)}var d="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,p=e("../consts"),h=d.field.isDimension,m=d.field.isOrdinalScale,g=t.exports=r,b=g.rule={point:o,bar:s,line:u,area:c,text:l,tick:f};g.satisfyRules=function(e,t,n,r){var a=d.compile.marks[t],i=a.requiredEncoding,o=a.supportedEncoding;for(var f in i)if(!(i[f]in e))return!1;for(var s in e)if(!o[s])return!1;return!b[t]||b[t](e,n,r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":10}],16:[function(e,t,n){(function(n){"use strict";function r(e,t,n){n=f.schema.util.extend(n||{},o.gen.projections);var u=[],c=[],l=[],d=!1,p=!1,h={};e.forEach(function(e,r){if(h[e.name]=r,e.selected)u.push(e),s(e)||"T"===e.type?d=!0:p=!0;else if(e.selected!==!1&&!f.field.isCount(e)){if(f.field.isDimension(e)&&!n.maxCardinalityForAutoAddOrdinal&&f.field.cardinality(e,t,15)>n.maxCardinalityForAutoAddOrdinal)return;c.push(e)}}),c.sort(a(d,p,h));var m=i.chooseKorLess(c,1);return m.forEach(function(e){var t=u.concat(e);if(t.length>0){if(n.omitDotPlot&&1===t.length)return;l.push(t)}}),l.forEach(function(e){e.key=r.key(e)}),l}function a(e,t,n){return function(r,a){if(r.type!==a.type){if(!e)return u[r.type]-u[a.type];if(!t)return u[a.type]-u[r.type]}return n[r.name]-n[a.name]}}var i=e("../util"),o=e("../consts"),f="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,s=f.field.isDimension;t.exports=r;var u={N:0,O:1,T:2,Q:3};r.key=function(e){return e.map(function(e){return f.field.isCount(e)?"count":e.name}).join(",")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":10,"../util":20}],17:[function(e,t,n){(function(t){"use strict";var n=t||window;e("vega-lite/src/globals"),n.CHART_TYPES={TABLE:"TABLE",BAR:"BAR",PLOT:"PLOT",LINE:"LINE",AREA:"AREA",MAP:"MAP",HISTOGRAM:"HISTOGRAM"},n.ANY_DATA_TYPES=15}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"vega-lite/src/globals":6}],18:[function(e,t,n){t.exports={encoding:e("./rankEncodings")}},{"./rankEncodings":19}],19:[function(e,t,n){(function(n){"use strict";function r(e,t,n,s){var u=[],c=a.keys(e.encoding),l=e.marktype,d=e.encoding,p=a.enc.reduce(e.encoding,function(e,t,n){var r=a.field.shorthand(t),i=e[r]=e[r]||[];return i.push({encType:n,field:t}),e},{});return a.forEach(p,function(i){var o=i.map(function(e){return e.encType+a.shorthand.assign+a.field.shorthand(e.field)+" "+(s&&s[e.field.name]?"[x]":"[ ]")}),f=i.map(function(i){var o=a.field.role(i.field),f=r.score[o](i.field,i.encType,e.marktype,t,n);return!s||s[i.field.name]?f:Math.pow(f,.125)});u.push({reason:o.join(" | "),score:Math.max.apply(null,f)})}),l===TEXT||d.x&&d.y&&i(d.x)^i(d.y)&&u.push({reason:"OxQ plot",score:.8}),c.length>1&&l!==TEXT&&(d.x&&d.y||d.geo||d.text||u.push({reason:"unused position",score:o})),u.push({reason:"marktype="+l,score:f[l]}),{score:u.reduce(function(e,t){return e*t.score},1),features:u}}e("../globals");var a="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,i=a.field.isDimension;t.exports=r;var o=.5,f={line:.99,area:.98,bar:.97,tick:.96,point:.95,circle:.94,square:.94,text:.8},s={},u={},c=.1,l=.01;s.minor=.01,s.pos=1,s.Y_T=.8,s.facet_text=1,s.facet_good=.675,s.facet_ok=.55,s.facet_bad=.4,s.color_good=.7,s.color_ok=.65,s.color_bad=.3,s.color_stack=.6,s.shape=.6,s.detail=.5,s.bad=c,s.terrible=l,u.pos=1,u.size=.6,u.color=.5,u.alpha=.45,u.text=.4,u.bad=c,u.terrible=l,r.dimensionScore=function(e,t,n,r,i){var o=a.field.cardinality(e,r);switch(t){case X:return a.field.isTypes(e,[N,O])?s.pos-s.minor:s.pos;case Y:return a.field.isTypes(e,[N,O])?s.pos-s.minor:e.type===T?s.Y_T:s.pos-s.minor;case COL:return n===TEXT?s.facet_text:o<=i.maxGoodCardinalityForFacets?s.facet_good:o<=i.maxCardinalityForFacets?s.facet_ok:s.facet_bad;case ROW:return n===TEXT?s.facet_text:(o<=i.maxGoodCardinalityForFacets?s.facet_good:o<=i.maxCardinalityForFacets?s.facet_ok:s.facet_bad)-s.minor;case COLOR:var f=e.bin&&e.type===Q||e.fn&&e.type===T,u="bar"===n||"area"===n;return f?s.color_bad:u?s.color_stack:o<=i.maxGoodCardinalityForColor?s.color_good:o<=i.maxCardinalityForColor?s.color_ok:s.color_bad;case SHAPE:return o<=i.maxCardinalityForShape?s.shape:l;case DETAIL:return s.detail}return l},r.dimensionScore.consts=s,r.measureScore=function(e,t,n,r,a){switch(t){case X:return u.pos;case Y:return u.pos;case SIZE:return"bar"===n?c:n===TEXT?c:"line"===n?c:u.size;case COLOR:return u.color;case"alpha":return u.alpha;case TEXT:return u.text}return c},r.measureScore.consts=u,r.score={dimension:r.dimensionScore,measure:r.measureScore}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../globals":17}],20:[function(e,t,n){"use strict";var r=e("./consts"),a=t.exports={gen:{}};a.isArray=Array.isArray||function(e){return"[object Array]"=={}.toString.call(e)},a.json=function(e,t){return JSON.stringify(e,null,t)},a.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},a.nestedMap=function(e,t,n,r){return e.map(0===n?t:function(e){var i=a.nestedMap(e,t,n-1);return r?i.filter(a.nonEmpty):i})},a.nestedReduce=function(e,t,n,r){return 0===n?e.reduce(t,[]):e.map(function(e){var i=a.nestedReduce(e,t,n-1);return r?i.filter(a.nonEmpty):i})},a.nonEmpty=function(e){return!a.isArray(e)||e.length>0},a.traverse=function(e,t){return void 0!==e.value?t.push(e.value):(e.left&&a.traverse(e.left,t),e.right&&a.traverse(e.right,t)),t},a.union=function(e,t){var n={};return e.forEach(function(e){n[e]=!0}),t.forEach(function(e){n[e]=!0}),a.keys(n)},a.gen.getOpt=function(e){return(e?a.keys(e):[]).reduce(function(t,n){return t[n]=e[n],t},Object.create(r.gen.DEFAULT_OPT))},a.powerset=function(e){for(var t=[[]],n=0;n<e.length;n++)for(var r=0,a=t.length;a>r;r++)t.push(t[r].concat(e[n]));return t},a.chooseKorLess=function(e,t){for(var n=[[]],r=0;r<e.length;r++)for(var a=0,i=n.length;i>a;a++){var o=n[a].concat(e[r]);o.length<=t&&n.push(o)}return n},a.chooseK=function(e,t){for(var n=[[]],r=[],a=0;a<e.length;a++)for(var i=0,o=n.length;o>i;i++){var f=n[i].concat(e[a]);f.length<t?n.push(f):f.length===t&&r.push(f)}return r},a.cross=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var a=0;a<t.length;a++)n.push(e[r].concat(t[a]));return n}},{"./consts":10}]},{},[1])(1)}),function(e){var t={common:{init:function(){},finalize:function(){}},home:{init:function(){},finalize:function(){}},about_us:{init:function(){}}},n={fire:function(e,n,r){var a,i=t;n=void 0===n?"init":n,a=""!==e,a=a&&i[e],a=a&&"function"==typeof i[e][n],a&&i[e][n](r)},loadEvents:function(){n.fire("common"),e.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){n.fire(t),n.fire(t,"finalize")}),n.fire("common","finalize")}};e(document).ready(n.loadEvents)}(jQuery);
//# sourceMappingURL=main.js.map